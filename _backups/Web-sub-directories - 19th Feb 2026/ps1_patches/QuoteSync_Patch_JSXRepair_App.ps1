# QuoteSync â€” JSX repair (customers + position wizard) after StageA3
# Run from: PS C:\Github\QuoteSync\web\ps1_patches>
# This script will Set-Location to C:\Github\QuoteSync\web automatically.

$ErrorActionPreference = "Stop"

function Ok($m) { Write-Host "OK: $m" -ForegroundColor Green }
function Fail($m) { Write-Host "ERROR: $m" -ForegroundColor Red; throw $m }

$WebRoot = "C:\Github\QuoteSync\web"
Write-Host "Run directory: $WebRoot"
Set-Location $WebRoot

$stamp = Get-Date -Format "yyyyMMdd-HHmmss"
$backupDir = Join-Path $WebRoot "_backups"
New-Item -ItemType Directory -Force -Path $backupDir | Out-Null

function Backup-File($relPath) {
  $src = Join-Path $WebRoot $relPath
  if (!(Test-Path $src)) { Fail "Missing file: $relPath" }
  $dst = Join-Path $backupDir (("0.1.bak" -f ($relPath -replace "[\\/:*?\"<>|]", "_"), $stamp))
  Copy-Item -Force $src $dst
}

function Write-Utf8NoBom-FromBase64($path, $b64) {
  $bytes = [Convert]::FromBase64String($b64)
  $utf8 = New-Object System.Text.UTF8Encoding($false)
  $text = $utf8.GetString($bytes)
  [System.IO.File]::WriteAllText($path, $text, $utf8)
}

Backup-File "src\App.tsx"
Ok "Backup written: src\App.tsx"

$AppB64 = @"
aW1wb3J0IFJlYWN0LCB7IHVzZUVmZmVjdCwgdXNlTWVtbywgdXNlU3RhdGUgfSBmcm9tICJyZWFjdCI7CmltcG9ydCBHcmlkRWRpdG9yIGZyb20gIi4vY29tcG9uZW50cy9HcmlkRWRpdG9yIjsKCi8qID09PT09PT09PT09PT09PT09PT09PT09PT0KICAgVHlwZXMKPT09PT09PT09PT09PT09PT09PT09PT09PSAqLwoKdHlwZSBNZW51S2V5ID0KICB8ICJjdXN0b21lcnNfYnVzaW5lc3MiCiAgfCAiY3VzdG9tZXJzX2luZGl2aWR1YWwiCiAgfCAicHJvamVjdF9wcmVmZXJlbmNlcyIKICB8ICJhZGRyZXNzX2RhdGFiYXNlIgogIHwgInJlcG9ydHMiCiAgfCAiY2FkX2RyYXdpbmciCiAgfCAicmVtb3RlX3N1cHBvcnQiOwoKdHlwZSBDbGllbnRUeXBlID0gIkJ1c2luZXNzIiB8ICJJbmRpdmlkdWFsIjsKdHlwZSBFc3RpbWF0ZVN0YXR1cyA9ICJEcmFmdCIgfCAiQ29tcGxldGVkIjsKCnR5cGUgUHJvZHVjdFR5cGUgPQogIHwgInVQVkMiCiAgfCAidVBWQyBBbHUgQ2xhZCIKICB8ICJUaW1iZXIiCiAgfCAiVGltYmVyIEFsdW1pbml1bSBDbGFkIgogIHwgIkFsdW1pbml1bSIKICB8ICJTdGVlbCI7Cgp0eXBlIFZpZXcgPQogIHwgImN1c3RvbWVycyIKICB8ICJlc3RpbWF0ZV9waWNrZXIiCiAgfCAiZXN0aW1hdGVfZGVmYXVsdHMiCiAgfCAiZXN0aW1hdGVfd29ya3NwYWNlIjsKCnR5cGUgQ2xpZW50ID0gewogIGlkOiBzdHJpbmc7CiAgdHlwZTogQ2xpZW50VHlwZTsKICBjbGllbnRSZWY6IHN0cmluZzsgLy8gRUYtQ0wtMDAxCiAgY2xpZW50TmFtZTogc3RyaW5nOwogIGVtYWlsOiBzdHJpbmc7CiAgbW9iaWxlOiBzdHJpbmc7CiAgaG9tZTogc3RyaW5nOwoKICBwcm9qZWN0TmFtZTogc3RyaW5nOwogIHByb2plY3RBZGRyZXNzOiBzdHJpbmc7CiAgaW52b2ljZUFkZHJlc3M6IHN0cmluZzsKCiAgYnVzaW5lc3NOYW1lPzogc3RyaW5nOwogIGNvbnRhY3RQZXJzb24/OiBzdHJpbmc7CgogIGVzdGltYXRlczogRXN0aW1hdGVbXTsKfTsKCnR5cGUgRXN0aW1hdGVEZWZhdWx0cyA9IHsKICBzdXBwbGllcjogc3RyaW5nOwogIHByb2R1Y3RUeXBlOiBQcm9kdWN0VHlwZTsKICBwcm9kdWN0OiBzdHJpbmc7CgogIHdvb2RUeXBlOiBzdHJpbmc7CgogIGV4dGVybmFsRmluaXNoOiBzdHJpbmc7CiAgaW50ZXJuYWxGaW5pc2g6IHN0cmluZzsKCiAgaGluZ2VUeXBlOiAiQ29uY2VhbGVkIiB8ICJFeHBvc2VkIDEzMEtnIiB8ICJFeHBvc2VkIDE4MEtnIjsKCiAgZ2xhc3NUeXBlOiAiRG91YmxlIiB8ICJUcmlwbGUiOwogIHVnVmFsdWU6IHN0cmluZzsgLy8gcmVuYW1lZCBmcm9tIFUgdG8gVWcKICBnVmFsdWU6IHN0cmluZzsKCiAgd2luZG93SGFuZGxlVHlwZTogIlR5cGUgMSIgfCAiVHlwZSAyIiB8ICJUeXBlIDMiIHwgIlR5cGUgNCIgfCAiVHlwZSA1IjsKCiAgLy8gZG9vci1vbmx5CiAgZG9vck11bHRpcG9pbnRMb2NraW5nOiBib29sZWFuOwogIGVsZWN0cmljYWxPcGVyYXRpb246IGJvb2xlYW47CiAgZGF5TGF0Y2g6IGJvb2xlYW47CgogIC8vIGFjY2Vzc29yaWVzCiAgaW50ZXJuYWxDaWxsUmVxdWlyZWQ6IGJvb2xlYW47CiAgZXh0ZXJuYWxTaWxsUmVxdWlyZWQ6IGJvb2xlYW47CiAgY2lsbERlcHRoTW06IG51bWJlcjsKICBjaWxsRW5kQ2FwVHlwZTogIkNsYWRkaW5nL1JlbmRlciBFbmQgQ2FwIiB8ICJCcmljayBUeXBlIEVuZCBDYXAiOwoKICBmcmFtZUV4dExlZnRNbTogbnVtYmVyOwogIGZyYW1lRXh0UmlnaHRNbTogbnVtYmVyOwogIGZyYW1lRXh0VG9wTW06IG51bWJlcjsKICBmcmFtZUV4dEJvdHRvbU1tOiBudW1iZXI7CgogIHN1blByb3RlY3Rpb25SZXF1aXJlZDogYm9vbGVhbjsKICBzdW5Qcm90ZWN0aW9uVHlwZTogIlNodXR0ZXJzIiB8ICJSb2xsZXIgYmxpbmRzIiB8ICJWZW5ldGlhbiBibGluZHMgKGV4dGVybmFsKSIgfCAiVmVuZXRpYW4gYmxpbmRzIChpbnRlcm5hbCkiOwp9OwoKdHlwZSBFc3RpbWF0ZSA9IHsKICBpZDogc3RyaW5nOwogIGVzdGltYXRlUmVmOiBzdHJpbmc7CiAgYmFzZUVzdGltYXRlUmVmOiBzdHJpbmc7CiAgcmV2aXNpb25ObzogbnVtYmVyOwogIHN0YXR1czogRXN0aW1hdGVTdGF0dXM7CiAgZGVmYXVsdHM6IEVzdGltYXRlRGVmYXVsdHM7CiAgcG9zaXRpb25zOiBQb3NpdGlvbltdOwp9OwoKdHlwZSBQb3NpdGlvbiA9IHsKICBpZDogc3RyaW5nOwogIHBvc2l0aW9uUmVmOiBzdHJpbmc7CiAgcXR5OiBudW1iZXI7CiAgcm9vbU5hbWU6IHN0cmluZzsKCiAgd2lkdGhNbTogbnVtYmVyOwogIGhlaWdodE1tOiBudW1iZXI7CiAgZmllbGRzWDogbnVtYmVyOwogIGZpZWxkc1k6IG51bWJlcjsKCiAgaW5zZXJ0aW9uOiBzdHJpbmc7CiAgY2VsbEluc2VydGlvbnM6IFJlY29yZDxzdHJpbmcsIHN0cmluZz47IC8vIGtleTogXCJjb2wscm93XCIKICBjb2xXaWR0aHNNbT86IG51bWJlcltdOwogIHJvd0hlaWdodHNNbT86IG51bWJlcltdOwoKICBwb3NpdGlvblR5cGU6ICJXaW5kb3ciIHwgIkRvb3IiOwoKICAvLyBwZXItcG9zaXRpb24gb3ZlcnJpZGVzIChvcHRpb25hbCkKICB1c2VFc3RpbWF0ZURlZmF1bHRzOiBib29sZWFuOwogIG92ZXJyaWRlczogUGFydGlhbDxFc3RpbWF0ZURlZmF1bHRzPjsKfTsKCi8qID09PT09PT09PT09PT09PT09PT09PT09PT0KICAgSGVscGVycwo9PT09PT09PT09PT09PT09PT09PT09PT09ICovCgpmdW5jdGlvbiB1aWQoKSB7CiAgcmV0dXJuIE1hdGgucmFuZG9tKCkudG9TdHJpbmcoMTYpLnNsaWNlKDIpICsgRGF0ZS5ub3coKS50b1N0cmluZygxNik7Cn0KCmZ1bmN0aW9uIHBhZDMobjogbnVtYmVyKSB7CiAgY29uc3QgcyA9IFN0cmluZyhuKTsKICByZXR1cm4gcy5sZW5ndGggPj0gMyA/IHMgOiAiMCIucmVwZWF0KDMgLSBzLmxlbmd0aCkgKyBzOwp9CgpmdW5jdGlvbiBrZXlGb3JDZWxsKGNvbDogbnVtYmVyLCByb3c6IG51bWJlcikgewogIHJldHVybiBgJHtjb2x9LCR7cm93fWA7Cn0KCmZ1bmN0aW9uIG5vcm1hbGl6ZUNlbGxJbnNlcnRpb25zKAogIGZpZWxkc1g6IG51bWJlciwKICBmaWVsZHNZOiBudW1iZXIsCiAgZXhpc3Rpbmc6IFJlY29yZDxzdHJpbmcsIHN0cmluZz4gfCB1bmRlZmluZWQsCiAgZmFsbGJhY2s6IHN0cmluZwopIHsKICBjb25zdCBvdXQ6IFJlY29yZDxzdHJpbmcsIHN0cmluZz4gPSB7fTsKICBmb3IgKGxldCByID0gMDsgciA8IGZpZWxkc1k7IHIrKykgewogICAgZm9yIChsZXQgYyA9IDA7IGMgPCBmaWVsZHNYOyBjKyspIHsKICAgICAgY29uc3QgayA9IGtleUZvckNlbGwoYywgcik7CiAgICAgIG91dFtrXSA9IGV4aXN0aW5nPy5ba10gPz8gZmFsbGJhY2s7CiAgICB9CiAgfQogIHJldHVybiBvdXQ7Cn0KCmZ1bmN0aW9uIGNsYW1wTnVtKG46IG51bWJlciwgbWluOiBudW1iZXIsIG1heDogbnVtYmVyKSB7CiAgcmV0dXJuIE1hdGgubWF4KG1pbiwgTWF0aC5taW4obWF4LCBuKSk7Cn0KCmZ1bmN0aW9uIG5leHRDbGllbnRSZWYobjogbnVtYmVyKSB7CiAgcmV0dXJuIGBFRi1DTC0ke3BhZDMobil9YDsKfQoKY29uc3QgREVGQVVMVF9FU1RJTUFURV9SRUZfUFJFRklYID0gIkVGLUVTVCI7CgovKioKICogRXN0aW1hdGUgcmVmZXJlbmNlIHByZWZpeC4KICogRGVmYXVsdCBhbGlnbnMgdG8gRUYtRVNULVlZWVktIyMjLgogKiBGdXR1cmU6IGV4cG9zZSBhcyBhbiBBZG1pbiBzZXR0aW5nLgogKi8KZnVuY3Rpb24gZ2V0RXN0aW1hdGVSZWZQcmVmaXgoKSB7CiAgdHJ5IHsKICAgIGNvbnN0IHYgPSBsb2NhbFN0b3JhZ2UuZ2V0SXRlbSgicXVvdGVzeW5jLmVzdGltYXRlUmVmUHJlZml4Iik7CiAgICBpZiAodiAmJiAvXltBLVowLTktXSskLy50ZXN0KHYpKSByZXR1cm4gdjsKICB9IGNhdGNoIHsKICAgIC8vIGlnbm9yZSBzdG9yYWdlIGVycm9ycyAocHJpdmF0ZSBtb2RlIC8gYmxvY2tlZCkKICB9CiAgcmV0dXJuIERFRkFVTFRfRVNUSU1BVEVfUkVGX1BSRUZJWDsKfQoKZnVuY3Rpb24gbmV4dEVzdGltYXRlQmFzZVJlZih5ZWFyOiBudW1iZXIsIG46IG51bWJlcikgewogIHJldHVybiBgJHtnZXRFc3RpbWF0ZVJlZlByZWZpeCgpfS0ke3llYXJ9LSR7cGFkMyhuKX1gOwp9CgpmdW5jdGlvbiBlc3RpbWF0ZVJlZldpdGhSZXZpc2lvbihiYXNlOiBzdHJpbmcsIHJldmlzaW9uTm86IG51bWJlcikgewogIGlmIChyZXZpc2lvbk5vIDw9IDApIHJldHVybiBiYXNlOwogIHJldHVybiBgJHtiYXNlfS0ke1N0cmluZyhyZXZpc2lvbk5vKS5wYWRTdGFydCgyLCAiMCIpfWA7Cn0KCmNvbnN0IFBST0RVQ1RfVFlQRVM6IFByb2R1Y3RUeXBlW10gPSBbInVQVkMiLCAidVBWQyBBbHUgQ2xhZCIsICJUaW1iZXIiLCAiVGltYmVyIEFsdW1pbml1bSBDbGFkIiwgIkFsdW1pbml1bSIsICJTdGVlbCJdOwoKdHlwZSBTdXBwbGllckNhdGFsb2cgPSB7CiAgbmFtZTogc3RyaW5nOwogIHByb2R1Y3RzQnlUeXBlOiBQYXJ0aWFsPFJlY29yZDxQcm9kdWN0VHlwZSwgc3RyaW5nW10+PjsKfTsKCmNvbnN0IFNVUFBMSUVSUzogU3VwcGxpZXJDYXRhbG9nW10gPSBbCiAgewogICAgbmFtZTogIkludGVybm9ybSIsCiAgICBwcm9kdWN0c0J5VHlwZTogewogICAgICB1UFZDOiBbIktGNTIwIiwgIktGNDEwIiwgIktGMzIwIiwgIktGMzEwIl0sCiAgICAgICJ1UFZDIEFsdSBDbGFkIjogWyJLVjQ0MCIsICJLVjM1MCIsICJLRjUyMCIsICJLRjMxMCIsICJLRjMyMCJdLAogICAgICAiVGltYmVyIEFsdW1pbml1bSBDbGFkIjogWyJIVjQ1MCIsICJIRjQxMCIsICJIRjUxMCIsICJIVDQxMCIsICJIVDQwMCIsICJIVDMxMCIsICJIUzMzMCJdLAogICAgICBBbHVtaW5pdW06IFsiQVQ1MDAiLCAiQVQ1MTAiLCAiQVQ1MjAiLCAiQVQ1MzAiLCAiQVQ1NDAiXSwKICAgIH0sCiAgfSwKICB7CiAgICBuYW1lOiAiRWtvIE9rbmEiLAogICAgcHJvZHVjdHNCeVR5cGU6IHsKICAgICAgdVBWQzogWyJTeW5lZ28iLCAiSWRlYWwgNDAwMCIsICJJZGVhbCA3MCIsICJCbHVFdm9sdXRpb24gODIiLCAiSWRlYWwgODAwMCIsICJOb3JkbGluZSIsICJTOTAwMCJdLAogICAgICBUaW1iZXI6IFsiTmF0dXJvIDY4IiwgIk5hdHVybyA4MCIsICJOYXR1cm8gOTIiXSwKICAgICAgIlRpbWJlciBBbHVtaW5pdW0gQ2xhZCI6IFsiTmF0dXJvIDY4IEFsdSIsICJOYXR1cm8gODAgQWx1Il0sCiAgICAgIEFsdW1pbml1bTogWyJNQi03OU4iLCAiTUItODYgQ2FzZW1lbnQiLCAiTUItMTA0IFBhc3NpdmUiLCAiR2VuZXNpcyIsICJJbXBlcmlhbCJdLAogICAgICBTdGVlbDogWyJVbmljbyBYUyIsICJQcmVzdG8iLCAiVW5pY28iXSwKICAgIH0sCiAgfSwKXTsKCmZ1bmN0aW9uIGdldFN1cHBsaWVyKG5hbWU6IHN0cmluZykgewogIHJldHVybiBTVVBQTElFUlMuZmluZCgocykgPT4gcy5uYW1lID09PSBuYW1lKSA/PyBudWxsOwp9CgpmdW5jdGlvbiBhbGxQcm9kdWN0c0ZvclN1cHBsaWVyKG5hbWU6IHN0cmluZykgewogIGNvbnN0IHMgPSBnZXRTdXBwbGllcihuYW1lKTsKICBpZiAoIXMpIHJldHVybiBbXTsKICBjb25zdCBhbGwgPSBPYmplY3QudmFsdWVzKHMucHJvZHVjdHNCeVR5cGUpLmZsYXQoKS5maWx0ZXIoQm9vbGVhbikgYXMgc3RyaW5nW107CiAgcmV0dXJuIEFycmF5LmZyb20obmV3IFNldChhbGwpKS5zb3J0KChhLCBiKSA9PiBhLmxvY2FsZUNvbXBhcmUoYikpOwp9CgpmdW5jdGlvbiBmaXJzdFByb2R1Y3RGb3JTdXBwbGllcihuYW1lOiBzdHJpbmcpIHsKICByZXR1cm4gYWxsUHJvZHVjdHNGb3JTdXBwbGllcihuYW1lKVswXSA/PyAiIjsKfQoKY29uc3QgV09PRF9UWVBFUyA9IFsiRmluZ2VyIEpvaW50ZWQgUGluZSIsICJQaW5lIiwgIlNwcnVjZSIsICJMYXJjaCIsICJPYWsiLCAiQWNjb3lhIiwgIk1lcmFudGkiLCAiTWFob2dhbnkiXSBhcyBjb25zdDsKCmZ1bmN0aW9uIGlzVGltYmVyUHJvZHVjdFR5cGUodDogUHJvZHVjdFR5cGUpIHsKICByZXR1cm4gdCA9PT0gIlRpbWJlciIgfHwgdCA9PT0gIlRpbWJlciBBbHVtaW5pdW0gQ2xhZCI7Cn0KCi8qIC0tLSBmaW5pc2hlczogdHlwZWFoZWFkIGRyb3Bkb3duIHZpYSBkYXRhbGlzdCAtLS0gKi8KY29uc3QgRklOSVNIRVNfQllfVFlQRTogUmVjb3JkPFByb2R1Y3RUeXBlLCB7IGV4dGVybmFsOiBzdHJpbmdbXTsgaW50ZXJuYWw6IHN0cmluZ1tdIH0+ID0gewogIHVQVkM6IHsgZXh0ZXJuYWw6IFsiRXh0IFR5cGUgMSIsICJFeHQgVHlwZSAyIl0sIGludGVybmFsOiBbIkludCBUeXBlIDEiLCAiSW50IFR5cGUgMiJdIH0sCiAgInVQVkMgQWx1IENsYWQiOiB7IGV4dGVybmFsOiBbIkV4dCBUeXBlIDEiLCAiRXh0IFR5cGUgMiJdLCBpbnRlcm5hbDogWyJJbnQgVHlwZSAxIiwgIkludCBUeXBlIDIiXSB9LAogIFRpbWJlcjogeyBleHRlcm5hbDogWyJFeHQgVHlwZSAxIiwgIkV4dCBUeXBlIDIiXSwgaW50ZXJuYWw6IFsiSW50IFR5cGUgMSIsICJJbnQgVHlwZSAyIl0gfSwKICAiVGltYmVyIEFsdW1pbml1bSBDbGFkIjogeyBleHRlcm5hbDogWyJFeHQgVHlwZSAxIiwgIkV4dCBUeXBlIDIiXSwgaW50ZXJuYWw6IFsiSW50IFR5cGUgMSIsICJJbnQgVHlwZSAyIl0gfSwKICBBbHVtaW5pdW06IHsgZXh0ZXJuYWw6IFsiRXh0IFR5cGUgMSIsICJFeHQgVHlwZSAyIl0sIGludGVybmFsOiBbIkludCBUeXBlIDEiLCAiSW50IFR5cGUgMiJdIH0sCiAgU3RlZWw6IHsgZXh0ZXJuYWw6IFsiRXh0IFR5cGUgMSIsICJFeHQgVHlwZSAyIl0sIGludGVybmFsOiBbIkludCBUeXBlIDEiLCAiSW50IFR5cGUgMiJdIH0sCn07Cgpjb25zdCBISU5HRV9UWVBFUzogRXN0aW1hdGVEZWZhdWx0c1siaGluZ2VUeXBlIl1bXSA9IFsiQ29uY2VhbGVkIiwgIkV4cG9zZWQgMTMwS2ciLCAiRXhwb3NlZCAxODBLZyJdOwoKY29uc3QgVUdfRE9VQkxFID0gWyIxLjEiLCAiMS4yIl07CmNvbnN0IFVHX1RSSVBMRSA9IFsiMC40IiwgIjAuNSIsICIwLjYiLCAiMC43IiwgIjAuOCJdOwoKY29uc3QgSEFORExFX1RZUEVTOiBFc3RpbWF0ZURlZmF1bHRzWyJ3aW5kb3dIYW5kbGVUeXBlIl1bXSA9IFsiVHlwZSAxIiwgIlR5cGUgMiIsICJUeXBlIDMiLCAiVHlwZSA0IiwgIlR5cGUgNSJdOwoKY29uc3QgU1VOX1BST1RFQ1RJT046IEVzdGltYXRlRGVmYXVsdHNbInN1blByb3RlY3Rpb25UeXBlIl1bXSA9IFsKICAiU2h1dHRlcnMiLAogICJSb2xsZXIgYmxpbmRzIiwKICAiVmVuZXRpYW4gYmxpbmRzIChleHRlcm5hbCkiLAogICJWZW5ldGlhbiBibGluZHMgKGludGVybmFsKSIsCl07CgpmdW5jdGlvbiBidWlsZENpbGxEZXB0aE9wdGlvbnMoKTogbnVtYmVyW10gewogIGNvbnN0IG91dDogbnVtYmVyW10gPSBbXTsKICBmb3IgKGxldCB2ID0gNTA7IHYgPD0gMTEwOyB2ICs9IDIwKSBvdXQucHVzaCh2KTsKICBmb3IgKGxldCB2ID0gMTMwOyB2IDw9IDIxMDsgdiArPSAxNSkgb3V0LnB1c2godik7CiAgZm9yIChsZXQgdiA9IDIzMDsgdiA8PSA0MDA7IHYgKz0gMjApIG91dC5wdXNoKHYpOwogIC8vIGVuc3VyZSAyMTAgaW5jbHVkZWQgYWxyZWFkeTsgZW5zdXJlIDIzMCsgaXMgY29ycmVjdCBzdGVwIGZyb20gIjIxMCB1cCB0byA0MDAgaW4gMjBtbSIKICAvLyAod2Ugc3RhcnQgYXQgMjMwIHRvIGF2b2lkIGR1cGxpY2F0aW5nIDIxMCBhbmQgcHJlc2VydmUgMjBtbSBpbmNyZW1lbnRzKQogIHJldHVybiBvdXQ7Cn0KCmNvbnN0IENJTExfREVQVEhTID0gYnVpbGRDaWxsRGVwdGhPcHRpb25zKCk7CmNvbnN0IEZSQU1FX0VYVFMgPSBbMCwgMjUsIDUwLCA3NSwgMTAwXTsKCmZ1bmN0aW9uIG1ha2VEZWZhdWx0RXN0aW1hdGVEZWZhdWx0cygpOiBFc3RpbWF0ZURlZmF1bHRzIHsKICBjb25zdCBzdXBwbGllciA9IFNVUFBMSUVSU1swXT8ubmFtZSA/PyAiIjsKICBjb25zdCBwcm9kdWN0VHlwZTogUHJvZHVjdFR5cGUgPSAidVBWQyI7CiAgY29uc3QgcHJvZHVjdCA9IHN1cHBsaWVyID8gZmlyc3RQcm9kdWN0Rm9yU3VwcGxpZXIoc3VwcGxpZXIpIDogIiI7CiAgcmV0dXJuIHsKICAgIHN1cHBsaWVyLAogICAgcHJvZHVjdFR5cGUsCiAgICBwcm9kdWN0LAoKICAgIHdvb2RUeXBlOiBXT09EX1RZUEVTWzBdLAoKICAgIGV4dGVybmFsRmluaXNoOiAiIiwKICAgIGludGVybmFsRmluaXNoOiAiIiwKCiAgICBoaW5nZVR5cGU6ICJDb25jZWFsZWQiLAoKICAgIGdsYXNzVHlwZTogIkRvdWJsZSIsCiAgICB1Z1ZhbHVlOiAiMS4xIiwKICAgIGdWYWx1ZTogIjAuNTMiLAoKICAgIHdpbmRvd0hhbmRsZVR5cGU6ICJUeXBlIDEiLAoKICAgIGRvb3JNdWx0aXBvaW50TG9ja2luZzogZmFsc2UsCiAgICBlbGVjdHJpY2FsT3BlcmF0aW9uOiBmYWxzZSwKICAgIGRheUxhdGNoOiBmYWxzZSwKCiAgICBpbnRlcm5hbENpbGxSZXF1aXJlZDogZmFsc2UsCiAgICBleHRlcm5hbFNpbGxSZXF1aXJlZDogZmFsc2UsCiAgICBjaWxsRGVwdGhNbTogNTAsCiAgICBjaWxsRW5kQ2FwVHlwZTogIkNsYWRkaW5nL1JlbmRlciBFbmQgQ2FwIiwKCiAgICBmcmFtZUV4dExlZnRNbTogMCwKICAgIGZyYW1lRXh0UmlnaHRNbTogMCwKICAgIGZyYW1lRXh0VG9wTW06IDAsCiAgICBmcmFtZUV4dEJvdHRvbU1tOiAwLAoKICAgIHN1blByb3RlY3Rpb25SZXF1aXJlZDogZmFsc2UsCiAgICBzdW5Qcm90ZWN0aW9uVHlwZTogIlNodXR0ZXJzIiwKICB9Owp9Cgpjb25zdCBERUZBVUxUX0NVU1RPTUVSX0FERFJFU1MgPSBbIjQgR2xlYmUgUm9hZCIsICJDb3dkZW5iZWF0aCIsICJGaWZlIiwgIktZNCA5RkEiXS5qb2luKCJcbiIpOwoKZnVuY3Rpb24gbWFrZURlZmF1bHRDbGllbnRzKCk6IENsaWVudFtdIHsKICByZXR1cm4gWwogICAgewogICAgICBpZDogdWlkKCksCiAgICAgIHR5cGU6ICJCdXNpbmVzcyIsCiAgICAgIGNsaWVudFJlZjogbmV4dENsaWVudFJlZigxKSwKICAgICAgY2xpZW50TmFtZTogIkVjb2ZlbnN0ZXIgTHRkIiwKICAgICAgYnVzaW5lc3NOYW1lOiAiRWNvZmVuc3RlciBMdGQiLAogICAgICBjb250YWN0UGVyc29uOiAiIiwKICAgICAgZW1haWw6ICIiLAogICAgICBtb2JpbGU6ICIwNzg4MiA4MDkgNDUzIiwKICAgICAgaG9tZTogIiIsCiAgICAgIHByb2plY3ROYW1lOiAiIiwKICAgICAgcHJvamVjdEFkZHJlc3M6IERFRkFVTFRfQ1VTVE9NRVJfQUREUkVTUywKICAgICAgaW52b2ljZUFkZHJlc3M6IERFRkFVTFRfQ1VTVE9NRVJfQUREUkVTUywKICAgICAgZXN0aW1hdGVzOiBbXSwKICAgIH0sCiAgICB7CiAgICAgIGlkOiB1aWQoKSwKICAgICAgdHlwZTogIkluZGl2aWR1YWwiLAogICAgICBjbGllbnRSZWY6IG5leHRDbGllbnRSZWYoMiksCiAgICAgIGNsaWVudE5hbWU6ICJDcmFpZyBGZXJndXNvbiIsCiAgICAgIGJ1c2luZXNzTmFtZTogIiIsCiAgICAgIGNvbnRhY3RQZXJzb246ICIiLAogICAgICBlbWFpbDogIiIsCiAgICAgIG1vYmlsZTogIjA3ODgyIDgwOSA0NTMiLAogICAgICBob21lOiAiIiwKICAgICAgcHJvamVjdE5hbWU6ICIiLAogICAgICBwcm9qZWN0QWRkcmVzczogREVGQVVMVF9DVVNUT01FUl9BRERSRVNTLAogICAgICBpbnZvaWNlQWRkcmVzczogREVGQVVMVF9DVVNUT01FUl9BRERSRVNTLAogICAgICBlc3RpbWF0ZXM6IFtdLAogICAgfSwKICBdOwp9CgovKiA9PT09PT09PT09PT09PT09PT09PT09PT09CiAgIFVJIHByaW1pdGl2ZXMgKGlubGluZSBvbmx5KQo9PT09PT09PT09PT09PT09PT09PT09PT09ICovCgpmdW5jdGlvbiBDYXJkKHsgY2hpbGRyZW4sIHN0eWxlIH06IHsgY2hpbGRyZW46IFJlYWN0LlJlYWN0Tm9kZTsgc3R5bGU/OiBSZWFjdC5DU1NQcm9wZXJ0aWVzIH0pIHsKICByZXR1cm4gKAogICAgPGRpdgogICAgICBzdHlsZT17ewogICAgICAgIGJvcmRlclJhZGl1czogMTgsCiAgICAgICAgYm9yZGVyOiAiMXB4IHNvbGlkICNlNGU0ZTciLAogICAgICAgIGJhY2tncm91bmQ6ICIjZmZmIiwKICAgICAgICBwYWRkaW5nOiAxNiwKICAgICAgICBib3hTaGFkb3c6ICIwIDFweCAycHggcmdiYSgwLDAsMCwuMDYpIiwKICAgICAgICAuLi5zdHlsZSwKICAgICAgfX0KICAgID4KICAgICAge2NoaWxkcmVufQogICAgPC9kaXY+CiAgKTsKfQoKZnVuY3Rpb24gSDIoeyBjaGlsZHJlbiB9OiB7IGNoaWxkcmVuOiBSZWFjdC5SZWFjdE5vZGUgfSkgewogIHJldHVybiA8aDIgc3R5bGU9e3sgZm9udFNpemU6IDE2LCBtYXJnaW46IDAsIGZvbnRXZWlnaHQ6IDgwMCwgY29sb3I6ICIjMTgxODFiIiB9fT57Y2hpbGRyZW59PC9oMj47Cn0KCmZ1bmN0aW9uIEgzKHsgY2hpbGRyZW4gfTogeyBjaGlsZHJlbjogUmVhY3QuUmVhY3ROb2RlIH0pIHsKICByZXR1cm4gPGgzIHN0eWxlPXt7IGZvbnRTaXplOiAxNCwgbWFyZ2luOiAwLCBmb250V2VpZ2h0OiA4MDAsIGNvbG9yOiAiIzE4MTgxYiIgfX0+e2NoaWxkcmVufTwvaDM+Owp9CgpmdW5jdGlvbiBTbWFsbCh7IGNoaWxkcmVuIH06IHsgY2hpbGRyZW46IFJlYWN0LlJlYWN0Tm9kZSB9KSB7CiAgcmV0dXJuIDxkaXYgc3R5bGU9e3sgZm9udFNpemU6IDEyLCBjb2xvcjogIiM3MTcxN2EiIH19PntjaGlsZHJlbn08L2Rpdj47Cn0KCmZ1bmN0aW9uIEJ1dHRvbih7CiAgY2hpbGRyZW4sCiAgb25DbGljaywKICB2YXJpYW50ID0gInByaW1hcnkiLAogIGRpc2FibGVkLAogIHN0eWxlLAp9OiB7CiAgY2hpbGRyZW46IFJlYWN0LlJlYWN0Tm9kZTsKICBvbkNsaWNrPzogKCkgPT4gdm9pZDsKICB2YXJpYW50PzogInByaW1hcnkiIHwgInNlY29uZGFyeSI7CiAgZGlzYWJsZWQ/OiBib29sZWFuOwogIHN0eWxlPzogUmVhY3QuQ1NTUHJvcGVydGllczsKfSkgewogIGNvbnN0IGlzUHJpbWFyeSA9IHZhcmlhbnQgPT09ICJwcmltYXJ5IjsKICByZXR1cm4gKAogICAgPGJ1dHRvbgogICAgICB0eXBlPSJidXR0b24iCiAgICAgIGRpc2FibGVkPXshIWRpc2FibGVkfQogICAgICBvbkNsaWNrPXtvbkNsaWNrfQogICAgICBzdHlsZT17ewogICAgICAgIGJvcmRlclJhZGl1czogMTgsCiAgICAgICAgYm9yZGVyOiBpc1ByaW1hcnkgPyAibm9uZSIgOiAiMXB4IHNvbGlkICNlNGU0ZTciLAogICAgICAgIGJhY2tncm91bmQ6IGlzUHJpbWFyeSA/ICIjMTgxODFiIiA6ICIjZmZmIiwKICAgICAgICBjb2xvcjogaXNQcmltYXJ5ID8gIiNmZmYiIDogIiMzZjNmNDYiLAogICAgICAgIHBhZGRpbmc6ICIxMHB4IDE0cHgiLAogICAgICAgIGZvbnRTaXplOiAxNCwKICAgICAgICBmb250V2VpZ2h0OiA4MDAsCiAgICAgICAgY3Vyc29yOiBkaXNhYmxlZCA/ICJub3QtYWxsb3dlZCIgOiAicG9pbnRlciIsCiAgICAgICAgb3BhY2l0eTogZGlzYWJsZWQgPyAwLjU1IDogMSwKICAgICAgICAuLi5zdHlsZSwKICAgICAgfX0KICAgID4KICAgICAge2NoaWxkcmVufQogICAgPC9idXR0b24+CiAgKTsKfQoKZnVuY3Rpb24gSW5wdXQoewogIHZhbHVlLAogIG9uQ2hhbmdlLAogIHBsYWNlaG9sZGVyLAogIHR5cGUgPSAidGV4dCIsCiAgbGlzdCwKfTogewogIHZhbHVlOiBzdHJpbmc7CiAgb25DaGFuZ2U6ICh2OiBzdHJpbmcpID0+IHZvaWQ7CiAgcGxhY2Vob2xkZXI/OiBzdHJpbmc7CiAgdHlwZT86IHN0cmluZzsKICBsaXN0Pzogc3RyaW5nOwp9KSB7CiAgcmV0dXJuICgKICAgIDxpbnB1dAogICAgICB0eXBlPXt0eXBlfQogICAgICB2YWx1ZT17dmFsdWV9CiAgICAgIHBsYWNlaG9sZGVyPXtwbGFjZWhvbGRlcn0KICAgICAgbGlzdD17bGlzdH0KICAgICAgb25DaGFuZ2U9eyhlKSA9PiBvbkNoYW5nZShlLnRhcmdldC52YWx1ZSl9CiAgICAgIHN0eWxlPXt7CiAgICAgICAgd2lkdGg6ICIxMDAlIiwKICAgICAgICBib3JkZXJSYWRpdXM6IDEyLAogICAgICAgIGJvcmRlcjogIjFweCBzb2xpZCAjZTRlNGU3IiwKICAgICAgICBwYWRkaW5nOiAiMTBweCAxMnB4IiwKICAgICAgICBmb250U2l6ZTogMTQsCiAgICAgICAgb3V0bGluZTogIm5vbmUiLAogICAgICB9fQogICAgLz4KICApOwp9CgpmdW5jdGlvbiBQaWxsKHsgY2hpbGRyZW4gfTogeyBjaGlsZHJlbjogUmVhY3QuUmVhY3ROb2RlIH0pIHsKICByZXR1cm4gKAogICAgPHNwYW4KICAgICAgc3R5bGU9e3sKICAgICAgICBkaXNwbGF5OiAiaW5saW5lLWZsZXgiLAogICAgICAgIGFsaWduSXRlbXM6ICJjZW50ZXIiLAogICAgICAgIGJvcmRlclJhZGl1czogOTk5LAogICAgICAgIHBhZGRpbmc6ICI0cHggMTBweCIsCiAgICAgICAgZm9udFNpemU6IDEyLAogICAgICAgIGZvbnRXZWlnaHQ6IDgwMCwKICAgICAgICBiYWNrZ3JvdW5kOiAiI2Y0ZjRmNSIsCiAgICAgICAgY29sb3I6ICIjMTgxODFiIiwKICAgICAgICBib3JkZXI6ICIxcHggc29saWQgI2U0ZTRlNyIsCiAgICAgIH19CiAgICA+CiAgICAgIHtjaGlsZHJlbn0KICAgIDwvc3Bhbj4KICApOwp9CgpmdW5jdGlvbiBTaWRlYmFySXRlbSh7CiAgbGFiZWwsCiAgYWN0aXZlLAogIG9uQ2xpY2ssCn06IHsKICBsYWJlbDogc3RyaW5nOwogIGFjdGl2ZT86IGJvb2xlYW47CiAgb25DbGljaz86ICgpID0+IHZvaWQ7Cn0pIHsKICByZXR1cm4gKAogICAgPGRpdgogICAgICBvbkNsaWNrPXtvbkNsaWNrfQogICAgICBzdHlsZT17ewogICAgICAgIGJvcmRlclJhZGl1czogMTQsCiAgICAgICAgcGFkZGluZzogIjEwcHggMTJweCIsCiAgICAgICAgbWFyZ2luQm90dG9tOiA2LAogICAgICAgIGN1cnNvcjogInBvaW50ZXIiLAogICAgICAgIGJhY2tncm91bmQ6IGFjdGl2ZSA/ICIjMTgxODFiIiA6ICJ0cmFuc3BhcmVudCIsCiAgICAgICAgY29sb3I6IGFjdGl2ZSA/ICIjZmZmIiA6ICIjM2YzZjQ2IiwKICAgICAgICBmb250U2l6ZTogMTQsCiAgICAgICAgZm9udFdlaWdodDogYWN0aXZlID8gODAwIDogNjAwLAogICAgICB9fQogICAgPgogICAgICB7bGFiZWx9CiAgICA8L2Rpdj4KICApOwp9Cgpjb25zdCBsYWJlbFN0eWxlOiBSZWFjdC5DU1NQcm9wZXJ0aWVzID0geyBmb250U2l6ZTogMTMsIGNvbG9yOiAiIzNmM2Y0NiIsIGZvbnRXZWlnaHQ6IDcwMCwgbWFyZ2luQm90dG9tOiA2IH07CgovKiA9PT09PT09PT09PT09PT09PT09PT09PT09CiAgIERlZmF1bHRzIEVkaXRvciAoRXN0aW1hdGUtbGV2ZWwgKyBQb3NpdGlvbiAiVXNlIGVzdGltYXRlIGRlZmF1bHRzIikKPT09PT09PT09PT09PT09PT09PT09PT09PSAqLwoKZnVuY3Rpb24gRGVmYXVsdHNFZGl0b3IoewogIHRpdGxlLAogIHByb2R1Y3RUeXBlLAogIHZhbHVlLAogIG9uQ2hhbmdlLAogIHNob3dEb29yT3B0aW9ucywKfTogewogIHRpdGxlOiBzdHJpbmc7CiAgcHJvZHVjdFR5cGU6IFByb2R1Y3RUeXBlOwogIHZhbHVlOiBFc3RpbWF0ZURlZmF1bHRzOwogIG9uQ2hhbmdlOiAobmV4dDogRXN0aW1hdGVEZWZhdWx0cykgPT4gdm9pZDsKICBzaG93RG9vck9wdGlvbnM6IGJvb2xlYW47Cn0pIHsKICBjb25zdCBmaW5pc2hlcyA9IEZJTklTSEVTX0JZX1RZUEVbcHJvZHVjdFR5cGVdOwoKICAvLyBrZWVwIEcgZml4ZWQgYXQgMC41MyBmb3Igbm93IChwZXIgeW91ciBpbnN0cnVjdGlvbikKICB1c2VFZmZlY3QoKCkgPT4gewogICAgaWYgKHZhbHVlLmdWYWx1ZSAhPT0gIjAuNTMiKSBvbkNoYW5nZSh7IC4uLnZhbHVlLCBnVmFsdWU6ICIwLjUzIiB9KTsKICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSByZWFjdC1ob29rcy9leGhhdXN0aXZlLWRlcHMKICB9LCBbdmFsdWUudWdWYWx1ZSwgdmFsdWUuZ2xhc3NUeXBlXSk7CgogIGNvbnN0IHVnT3B0aW9ucyA9IHZhbHVlLmdsYXNzVHlwZSA9PT0gIkRvdWJsZSIgPyBVR19ET1VCTEUgOiBVR19UUklQTEU7CgogIHJldHVybiAoCiAgICA8ZGl2IHN0eWxlPXt7IGJvcmRlclJhZGl1czogMTQsIGJvcmRlcjogIjFweCBzb2xpZCAjZTRlNGU3IiwgcGFkZGluZzogMTIgfX0+CiAgICAgIDxIMz57dGl0bGV9PC9IMz4KCiAgICAgIDxkaXYgc3R5bGU9e3sgbWFyZ2luVG9wOiAxMiwgZGlzcGxheTogImdyaWQiLCBnYXA6IDE0IH19PgogICAgICAgIHsvKiBTdXBwbGllciAmIFByb2R1Y3QgKi99CiAgICAgICAgPGRpdiBzdHlsZT17eyBib3JkZXJSYWRpdXM6IDE0LCBib3JkZXI6ICIxcHggc29saWQgI2U0ZTRlNyIsIHBhZGRpbmc6IDEyIH19PgogICAgICAgICAgPEgzPlN1cHBsaWVyICYgUHJvZHVjdDwvSDM+CgogICAgICAgICAgPGRpdiBzdHlsZT17eyBtYXJnaW5Ub3A6IDEwLCBkaXNwbGF5OiAiZ3JpZCIsIGdhcDogMTIgfX0+CiAgICAgICAgICAgIDxkaXY+CiAgICAgICAgICAgICAgPGRpdiBzdHlsZT17bGFiZWxTdHlsZX0+U3VwcGxpZXI8L2Rpdj4KICAgICAgICAgICAgICA8c2VsZWN0CiAgICAgICAgICAgICAgICB2YWx1ZT17dmFsdWUuc3VwcGxpZXJ9CiAgICAgICAgICAgICAgICBvbkNoYW5nZT17KGUpID0+IHsKICAgICAgICAgICAgICAgICAgY29uc3Qgc3VwcGxpZXIgPSBlLnRhcmdldC52YWx1ZTsKICAgICAgICAgICAgICAgICAgY29uc3QgbmV4dFByb2QgPSBzdXBwbGllciA/IGZpcnN0UHJvZHVjdEZvclN1cHBsaWVyKHN1cHBsaWVyKSA6ICIiOwogICAgICAgICAgICAgICAgICBvbkNoYW5nZSh7IC4uLnZhbHVlLCBzdXBwbGllciwgcHJvZHVjdDogbmV4dFByb2QgfSk7CiAgICAgICAgICAgICAgICB9fQogICAgICAgICAgICAgICAgc3R5bGU9e3sgd2lkdGg6ICIxMDAlIiwgYm9yZGVyUmFkaXVzOiAxMiwgYm9yZGVyOiAiMXB4IHNvbGlkICNlNGU0ZTciLCBwYWRkaW5nOiAiMTBweCAxMnB4IiwgZm9udFNpemU6IDE0IH19CiAgICAgICAgICAgICAgPgogICAgICAgICAgICAgICAgPG9wdGlvbiB2YWx1ZT0iIj5TZWxlY3Qgc3VwcGxpZXLigKY8L29wdGlvbj4KICAgICAgICAgICAgICAgIHtTVVBQTElFUlMubWFwKChzKSA9PiAoCiAgICAgICAgICAgICAgICAgIDxvcHRpb24ga2V5PXtzLm5hbWV9IHZhbHVlPXtzLm5hbWV9PgogICAgICAgICAgICAgICAgICAgIHtzLm5hbWV9CiAgICAgICAgICAgICAgICAgIDwvb3B0aW9uPgogICAgICAgICAgICAgICAgKSl9CiAgICAgICAgICAgICAgPC9zZWxlY3Q+CiAgICAgICAgICAgIDwvZGl2PgoKICAgICAgICAgICAgPGRpdj4KICAgICAgICAgICAgICA8ZGl2IHN0eWxlPXtsYWJlbFN0eWxlfT5Qcm9kdWN0IHR5cGU8L2Rpdj4KICAgICAgICAgICAgICA8c2VsZWN0CiAgICAgICAgICAgICAgICB2YWx1ZT17dmFsdWUucHJvZHVjdFR5cGV9CiAgICAgICAgICAgICAgICBvbkNoYW5nZT17KGUpID0+IG9uQ2hhbmdlKHsgLi4udmFsdWUsIHByb2R1Y3RUeXBlOiBlLnRhcmdldC52YWx1ZSBhcyBQcm9kdWN0VHlwZSB9KX0KICAgICAgICAgICAgICAgIHN0eWxlPXt7IHdpZHRoOiAiMTAwJSIsIGJvcmRlclJhZGl1czogMTIsIGJvcmRlcjogIjFweCBzb2xpZCAjZTRlNGU3IiwgcGFkZGluZzogIjEwcHggMTJweCIsIGZvbnRTaXplOiAxNCB9fQogICAgICAgICAgICAgID4KICAgICAgICAgICAgICAgIHtQUk9EVUNUX1RZUEVTLm1hcCgodCkgPT4gKAogICAgICAgICAgICAgICAgICA8b3B0aW9uIGtleT17dH0gdmFsdWU9e3R9PgogICAgICAgICAgICAgICAgICAgIHt0fQogICAgICAgICAgICAgICAgICA8L29wdGlvbj4KICAgICAgICAgICAgICAgICkpfQogICAgICAgICAgICAgIDwvc2VsZWN0PgogICAgICAgICAgICA8L2Rpdj4KCiAgICAgICAgICAgIDxkaXY+CiAgICAgICAgICAgICAgPGRpdiBzdHlsZT17bGFiZWxTdHlsZX0+UHJvZHVjdDwvZGl2PgogICAgICAgICAgICAgIDxzZWxlY3QKICAgICAgICAgICAgICAgIHZhbHVlPXt2YWx1ZS5wcm9kdWN0fQogICAgICAgICAgICAgICAgb25DaGFuZ2U9eyhlKSA9PiBvbkNoYW5nZSh7IC4uLnZhbHVlLCBwcm9kdWN0OiBlLnRhcmdldC52YWx1ZSB9KX0KICAgICAgICAgICAgICAgIGRpc2FibGVkPXshdmFsdWUuc3VwcGxpZXJ9CiAgICAgICAgICAgICAgICBzdHlsZT17ewogICAgICAgICAgICAgICAgICB3aWR0aDogIjEwMCUiLAogICAgICAgICAgICAgICAgICBib3JkZXJSYWRpdXM6IDEyLAogICAgICAgICAgICAgICAgICBib3JkZXI6ICIxcHggc29saWQgI2U0ZTRlNyIsCiAgICAgICAgICAgICAgICAgIHBhZGRpbmc6ICIxMHB4IDEycHgiLAogICAgICAgICAgICAgICAgICBmb250U2l6ZTogMTQsCiAgICAgICAgICAgICAgICAgIGJhY2tncm91bmQ6ICF2YWx1ZS5zdXBwbGllciA/ICIjZmFmYWZhIiA6ICIjZmZmIiwKICAgICAgICAgICAgICAgICAgY29sb3I6ICF2YWx1ZS5zdXBwbGllciA/ICIjYTFhMWFhIiA6ICIjMTgxODFiIiwKICAgICAgICAgICAgICAgIH19CiAgICAgICAgICAgICAgPgogICAgICAgICAgICAgICAgPG9wdGlvbiB2YWx1ZT0iIj57dmFsdWUuc3VwcGxpZXIgPyAiU2VsZWN0IHByb2R1Y3TigKYiIDogIlNlbGVjdCBzdXBwbGllciBmaXJzdOKApiJ9PC9vcHRpb24+CiAgICAgICAgICAgICAgICB7YWxsUHJvZHVjdHNGb3JTdXBwbGllcih2YWx1ZS5zdXBwbGllcikubWFwKChwKSA9PiAoCiAgICAgICAgICAgICAgICAgIDxvcHRpb24ga2V5PXtwfSB2YWx1ZT17cH0+CiAgICAgICAgICAgICAgICAgICAge3B9CiAgICAgICAgICAgICAgICAgIDwvb3B0aW9uPgogICAgICAgICAgICAgICAgKSl9CiAgICAgICAgICAgICAgPC9zZWxlY3Q+CiAgICAgICAgICAgIDwvZGl2PgogICAgICAgICAgPC9kaXY+CiAgICAgICAgPC9kaXY+CgogICAgICAgIHsvKiBGaW5pc2hlcyAqL30KICAgICAgICA8ZGl2IHN0eWxlPXt7IGJvcmRlclJhZGl1czogMTQsIGJvcmRlcjogIjFweCBzb2xpZCAjZTRlNGU3IiwgcGFkZGluZzogMTIgfX0+CiAgICAgICAgICA8SDM+RmluaXNoZXM8L0gzPgoKICAgICAgICAgIDxkYXRhbGlzdCBpZD17ImV4dC1maW5pc2gtIiArIHRpdGxlfT4KICAgICAgICAgICAge2ZpbmlzaGVzLmV4dGVybmFsLm1hcCgoeCkgPT4gKAogICAgICAgICAgICAgIDxvcHRpb24ga2V5PXt4fSB2YWx1ZT17eH0gLz4KICAgICAgICAgICAgKSl9CiAgICAgICAgICA8L2RhdGFsaXN0PgogICAgICAgICAgPGRhdGFsaXN0IGlkPXsiaW50LWZpbmlzaC0iICsgdGl0bGV9PgogICAgICAgICAgICB7ZmluaXNoZXMuaW50ZXJuYWwubWFwKCh4KSA9PiAoCiAgICAgICAgICAgICAgPG9wdGlvbiBrZXk9e3h9IHZhbHVlPXt4fSAvPgogICAgICAgICAgICApKX0KICAgICAgICAgIDwvZGF0YWxpc3Q+CgogICAgICAgICAgPGRpdiBzdHlsZT17eyBtYXJnaW5Ub3A6IDEwLCBkaXNwbGF5OiAiZ3JpZCIsIGdyaWRUZW1wbGF0ZUNvbHVtbnM6ICIxZnIgMWZyIiwgZ2FwOiAxMiB9fT4KICAgICAgICAgICAgPGRpdj4KICAgICAgICAgICAgICA8ZGl2IHN0eWxlPXtsYWJlbFN0eWxlfT5FeHRlcm5hbCBmaW5pc2g8L2Rpdj4KICAgICAgICAgICAgICA8SW5wdXQKICAgICAgICAgICAgICAgIHZhbHVlPXt2YWx1ZS5leHRlcm5hbEZpbmlzaH0KICAgICAgICAgICAgICAgIG9uQ2hhbmdlPXsodikgPT4gb25DaGFuZ2UoeyAuLi52YWx1ZSwgZXh0ZXJuYWxGaW5pc2g6IHYgfSl9CiAgICAgICAgICAgICAgICBsaXN0PXsiZXh0LWZpbmlzaC0iICsgdGl0bGV9CiAgICAgICAgICAgICAgICBwbGFjZWhvbGRlcj0iU2VsZWN0IG9yIHR5cGXigKYiCiAgICAgICAgICAgICAgLz4KICAgICAgICAgICAgPC9kaXY+CiAgICAgICAgICAgIDxkaXY+CiAgICAgICAgICAgICAgPGRpdiBzdHlsZT17bGFiZWxTdHlsZX0+SW50ZXJuYWwgZmluaXNoPC9kaXY+CiAgICAgICAgICAgICAgPElucHV0CiAgICAgICAgICAgICAgICB2YWx1ZT17dmFsdWUuaW50ZXJuYWxGaW5pc2h9CiAgICAgICAgICAgICAgICBvbkNoYW5nZT17KHYpID0+IG9uQ2hhbmdlKHsgLi4udmFsdWUsIGludGVybmFsRmluaXNoOiB2IH0pfQogICAgICAgICAgICAgICAgbGlzdD17ImludC1maW5pc2gtIiArIHRpdGxlfQogICAgICAgICAgICAgICAgcGxhY2Vob2xkZXI9IlNlbGVjdCBvciB0eXBl4oCmIgogICAgICAgICAgICAgIC8+CiAgICAgICAgICAgIDwvZGl2PgogICAgICAgICAgPC9kaXY+CiAgICAgICAgPC9kaXY+CgogICAgICAgIHsvKiBIaW5nZXMgKyBXb29kICovfQogICAgICAgIDxkaXYgc3R5bGU9e3sgYm9yZGVyUmFkaXVzOiAxNCwgYm9yZGVyOiAiMXB4IHNvbGlkICNlNGU0ZTciLCBwYWRkaW5nOiAxMiB9fT4KICAgICAgICAgIDxIMz5IYXJkd2FyZTwvSDM+CgogICAgICAgICAgPGRpdiBzdHlsZT17eyBtYXJnaW5Ub3A6IDEwLCBkaXNwbGF5OiAiZ3JpZCIsIGdyaWRUZW1wbGF0ZUNvbHVtbnM6ICIxZnIgMWZyIiwgZ2FwOiAxMiB9fT4KICAgICAgICAgICAgPGRpdj4KICAgICAgICAgICAgICA8ZGl2IHN0eWxlPXtsYWJlbFN0eWxlfT5IaW5nZXM8L2Rpdj4KICAgICAgICAgICAgICA8c2VsZWN0CiAgICAgICAgICAgICAgICB2YWx1ZT17dmFsdWUuaGluZ2VUeXBlfQogICAgICAgICAgICAgICAgb25DaGFuZ2U9eyhlKSA9PiBvbkNoYW5nZSh7IC4uLnZhbHVlLCBoaW5nZVR5cGU6IGUudGFyZ2V0LnZhbHVlIGFzIGFueSB9KX0KICAgICAgICAgICAgICAgIHN0eWxlPXt7IHdpZHRoOiAiMTAwJSIsIGJvcmRlclJhZGl1czogMTIsIGJvcmRlcjogIjFweCBzb2xpZCAjZTRlNGU3IiwgcGFkZGluZzogIjEwcHggMTJweCIsIGZvbnRTaXplOiAxNCB9fQogICAgICAgICAgICAgID4KICAgICAgICAgICAgICAgIHtISU5HRV9UWVBFUy5tYXAoKHQpID0+ICgKICAgICAgICAgICAgICAgICAgPG9wdGlvbiBrZXk9e3R9IHZhbHVlPXt0fT4KICAgICAgICAgICAgICAgICAgICB7dH0KICAgICAgICAgICAgICAgICAgPC9vcHRpb24+CiAgICAgICAgICAgICAgICApKX0KICAgICAgICAgICAgICA8L3NlbGVjdD4KICAgICAgICAgICAgPC9kaXY+CgogICAgICAgICAgICB7aXNUaW1iZXJQcm9kdWN0VHlwZSh2YWx1ZS5wcm9kdWN0VHlwZSkgPyAoCiAgICAgICAgICAgICAgPGRpdj4KICAgICAgICAgICAgICAgIDxkaXYgc3R5bGU9e2xhYmVsU3R5bGV9Pldvb2QgdHlwZTwvZGl2PgogICAgICAgICAgICAgICAgPHNlbGVjdAogICAgICAgICAgICAgICAgICB2YWx1ZT17dmFsdWUud29vZFR5cGV9CiAgICAgICAgICAgICAgICAgIG9uQ2hhbmdlPXsoZSkgPT4gb25DaGFuZ2UoeyAuLi52YWx1ZSwgd29vZFR5cGU6IGUudGFyZ2V0LnZhbHVlIH0pfQogICAgICAgICAgICAgICAgICBzdHlsZT17eyB3aWR0aDogIjEwMCUiLCBib3JkZXJSYWRpdXM6IDEyLCBib3JkZXI6ICIxcHggc29saWQgI2U0ZTRlNyIsIHBhZGRpbmc6ICIxMHB4IDEycHgiLCBmb250U2l6ZTogMTQgfX0KICAgICAgICAgICAgICAgID4KICAgICAgICAgICAgICAgICAge1dPT0RfVFlQRVMubWFwKCh3KSA9PiAoCiAgICAgICAgICAgICAgICAgICAgPG9wdGlvbiBrZXk9e3d9IHZhbHVlPXt3fT4KICAgICAgICAgICAgICAgICAgICAgIHt3fQogICAgICAgICAgICAgICAgICAgIDwvb3B0aW9uPgogICAgICAgICAgICAgICAgICApKX0KICAgICAgICAgICAgICAgIDwvc2VsZWN0PgogICAgICAgICAgICAgIDwvZGl2PgogICAgICAgICAgICApIDogKAogICAgICAgICAgICAgIDxkaXYgLz4KICAgICAgICAgICAgKX0KICAgICAgICAgIDwvZGl2PgogICAgICAgIDwvZGl2PgoKICAgICAgICB7LyogR2xhemluZyAqL30KICAgICAgICA8ZGl2IHN0eWxlPXt7IGJvcmRlclJhZGl1czogMTQsIGJvcmRlcjogIjFweCBzb2xpZCAjZTRlNGU3IiwgcGFkZGluZzogMTIgfX0+CiAgICAgICAgICA8SDM+R2xhemluZzwvSDM+CgogICAgICAgICAgPGRpdiBzdHlsZT17eyBtYXJnaW5Ub3A6IDEwLCBkaXNwbGF5OiAiZ3JpZCIsIGdyaWRUZW1wbGF0ZUNvbHVtbnM6ICIxZnIgMWZyIDFmciIsIGdhcDogMTIgfX0+CiAgICAgICAgICAgIDxkaXY+CiAgICAgICAgICAgICAgPGRpdiBzdHlsZT17bGFiZWxTdHlsZX0+R2xhc3M8L2Rpdj4KICAgICAgICAgICAgICA8c2VsZWN0CiAgICAgICAgICAgICAgICB2YWx1ZT17dmFsdWUuZ2xhc3NUeXBlfQogICAgICAgICAgICAgICAgb25DaGFuZ2U9eyhlKSA9PiB7CiAgICAgICAgICAgICAgICAgIGNvbnN0IGdsYXNzVHlwZSA9IGUudGFyZ2V0LnZhbHVlIGFzICJEb3VibGUiIHwgIlRyaXBsZSI7CiAgICAgICAgICAgICAgICAgIGNvbnN0IG5leHRVZyA9IGdsYXNzVHlwZSA9PT0gIkRvdWJsZSIgPyAiMS4xIiA6ICIwLjQiOwogICAgICAgICAgICAgICAgICBvbkNoYW5nZSh7IC4uLnZhbHVlLCBnbGFzc1R5cGUsIHVnVmFsdWU6IG5leHRVZywgZ1ZhbHVlOiAiMC41MyIgfSk7CiAgICAgICAgICAgICAgICB9fQogICAgICAgICAgICAgICAgc3R5bGU9e3sgd2lkdGg6ICIxMDAlIiwgYm9yZGVyUmFkaXVzOiAxMiwgYm9yZGVyOiAiMXB4IHNvbGlkICNlNGU0ZTciLCBwYWRkaW5nOiAiMTBweCAxMnB4IiwgZm9udFNpemU6IDE0IH19CiAgICAgICAgICAgICAgPgogICAgICAgICAgICAgICAgPG9wdGlvbiB2YWx1ZT0iRG91YmxlIj5Eb3VibGU8L29wdGlvbj4KICAgICAgICAgICAgICAgIDxvcHRpb24gdmFsdWU9IlRyaXBsZSI+VHJpcGxlPC9vcHRpb24+CiAgICAgICAgICAgICAgPC9zZWxlY3Q+CiAgICAgICAgICAgIDwvZGl2PgoKICAgICAgICAgICAgPGRpdj4KICAgICAgICAgICAgICA8ZGl2IHN0eWxlPXtsYWJlbFN0eWxlfT5VZyB2YWx1ZSByZXF1aXJlZDwvZGl2PgogICAgICAgICAgICAgIDxzZWxlY3QKICAgICAgICAgICAgICAgIHZhbHVlPXt2YWx1ZS51Z1ZhbHVlfQogICAgICAgICAgICAgICAgb25DaGFuZ2U9eyhlKSA9PiBvbkNoYW5nZSh7IC4uLnZhbHVlLCB1Z1ZhbHVlOiBlLnRhcmdldC52YWx1ZSwgZ1ZhbHVlOiAiMC41MyIgfSl9CiAgICAgICAgICAgICAgICBzdHlsZT17eyB3aWR0aDogIjEwMCUiLCBib3JkZXJSYWRpdXM6IDEyLCBib3JkZXI6ICIxcHggc29saWQgI2U0ZTRlNyIsIHBhZGRpbmc6ICIxMHB4IDEycHgiLCBmb250U2l6ZTogMTQgfX0KICAgICAgICAgICAgICA+CiAgICAgICAgICAgICAgICB7dWdPcHRpb25zLm1hcCgodSkgPT4gKAogICAgICAgICAgICAgICAgICA8b3B0aW9uIGtleT17dX0gdmFsdWU9e3V9PgogICAgICAgICAgICAgICAgICAgIHt1fQogICAgICAgICAgICAgICAgICA8L29wdGlvbj4KICAgICAgICAgICAgICAgICkpfQogICAgICAgICAgICAgIDwvc2VsZWN0PgogICAgICAgICAgICA8L2Rpdj4KCiAgICAgICAgICAgIDxkaXY+CiAgICAgICAgICAgICAgPGRpdiBzdHlsZT17bGFiZWxTdHlsZX0+RyB2YWx1ZTwvZGl2PgogICAgICAgICAgICAgIDxJbnB1dCB2YWx1ZT17dmFsdWUuZ1ZhbHVlfSBvbkNoYW5nZT17KHYpID0+IG9uQ2hhbmdlKHsgLi4udmFsdWUsIGdWYWx1ZTogdiB9KX0gLz4KICAgICAgICAgICAgICA8U21hbGw+UGxhY2Vob2xkZXI6IGZpeGVkIGF0IDAuNTMgZm9yIG5vdzwvU21hbGw+CiAgICAgICAgICAgIDwvZGl2PgogICAgICAgICAgPC9kaXY+CiAgICAgICAgPC9kaXY+CgogICAgICAgIHsvKiBXaW5kb3cgSGFuZGxlICovfQogICAgICAgIDxkaXYgc3R5bGU9e3sgYm9yZGVyUmFkaXVzOiAxNCwgYm9yZGVyOiAiMXB4IHNvbGlkICNlNGU0ZTciLCBwYWRkaW5nOiAxMiB9fT4KICAgICAgICAgIDxIMz5XaW5kb3cgSGFuZGxlPC9IMz4KCiAgICAgICAgICA8ZGl2IHN0eWxlPXt7IG1hcmdpblRvcDogMTAsIGRpc3BsYXk6ICJncmlkIiwgZ3JpZFRlbXBsYXRlQ29sdW1uczogIjFmciAxNjBweCIsIGdhcDogMTIsIGFsaWduSXRlbXM6ICJjZW50ZXIiIH19PgogICAgICAgICAgICA8ZGl2PgogICAgICAgICAgICAgIDxkaXYgc3R5bGU9e2xhYmVsU3R5bGV9PkhhbmRsZSB0eXBlPC9kaXY+CiAgICAgICAgICAgICAgPHNlbGVjdAogICAgICAgICAgICAgICAgdmFsdWU9e3ZhbHVlLndpbmRvd0hhbmRsZVR5cGV9CiAgICAgICAgICAgICAgICBvbkNoYW5nZT17KGUpID0+IG9uQ2hhbmdlKHsgLi4udmFsdWUsIHdpbmRvd0hhbmRsZVR5cGU6IGUudGFyZ2V0LnZhbHVlIGFzIGFueSB9KX0KICAgICAgICAgICAgICAgIHN0eWxlPXt7IHdpZHRoOiAiMTAwJSIsIGJvcmRlclJhZGl1czogMTIsIGJvcmRlcjogIjFweCBzb2xpZCAjZTRlNGU3IiwgcGFkZGluZzogIjEwcHggMTJweCIsIGZvbnRTaXplOiAxNCB9fQogICAgICAgICAgICAgID4KICAgICAgICAgICAgICAgIHtIQU5ETEVfVFlQRVMubWFwKCh0KSA9PiAoCiAgICAgICAgICAgICAgICAgIDxvcHRpb24ga2V5PXt0fSB2YWx1ZT17dH0+CiAgICAgICAgICAgICAgICAgICAge3R9CiAgICAgICAgICAgICAgICAgIDwvb3B0aW9uPgogICAgICAgICAgICAgICAgKSl9CiAgICAgICAgICAgICAgPC9zZWxlY3Q+CiAgICAgICAgICAgIDwvZGl2PgoKICAgICAgICAgICAgPGRpdgogICAgICAgICAgICAgIHN0eWxlPXt7CiAgICAgICAgICAgICAgICBoZWlnaHQ6IDk2LAogICAgICAgICAgICAgICAgYm9yZGVyUmFkaXVzOiAxMiwKICAgICAgICAgICAgICAgIGJvcmRlcjogIjFweCBzb2xpZCAjZTRlNGU3IiwKICAgICAgICAgICAgICAgIGJhY2tncm91bmQ6ICIjZmFmYWZhIiwKICAgICAgICAgICAgICAgIGRpc3BsYXk6ICJmbGV4IiwKICAgICAgICAgICAgICAgIGFsaWduSXRlbXM6ICJjZW50ZXIiLAogICAgICAgICAgICAgICAganVzdGlmeUNvbnRlbnQ6ICJjZW50ZXIiLAogICAgICAgICAgICAgICAgY29sb3I6ICIjNzE3MTdhIiwKICAgICAgICAgICAgICAgIGZvbnRXZWlnaHQ6IDgwMCwKICAgICAgICAgICAgICAgIGZvbnRTaXplOiAxMiwKICAgICAgICAgICAgICB9fQogICAgICAgICAgICA+CiAgICAgICAgICAgICAgSGFuZGxlIGltYWdlCiAgICAgICAgICAgIDwvZGl2PgogICAgICAgICAgPC9kaXY+CgogICAgICAgICAgPGRpdiBzdHlsZT17eyBtYXJnaW5Ub3A6IDEwIH19PgogICAgICAgICAgICA8bGFiZWwgc3R5bGU9e3sgZGlzcGxheTogImZsZXgiLCBnYXA6IDgsIGFsaWduSXRlbXM6ICJjZW50ZXIiLCBmb250U2l6ZTogMTQsIGZvbnRXZWlnaHQ6IDcwMCB9fT4KICAgICAgICAgICAgICA8aW5wdXQKICAgICAgICAgICAgICAgIHR5cGU9ImNoZWNrYm94IgogICAgICAgICAgICAgICAgY2hlY2tlZD17dmFsdWUuaW50ZXJuYWxDaWxsUmVxdWlyZWR9CiAgICAgICAgICAgICAgICBvbkNoYW5nZT17KGUpID0+IG9uQ2hhbmdlKHsgLi4udmFsdWUsIGludGVybmFsQ2lsbFJlcXVpcmVkOiBlLnRhcmdldC5jaGVja2VkIH0pfQogICAgICAgICAgICAgIC8+CiAgICAgICAgICAgICAgTG9ja2FibGUgaGFuZGxlCiAgICAgICAgICAgIDwvbGFiZWw+CiAgICAgICAgICAgIDxTbWFsbD5UaGlzIHdhcyBwcmV2aW91c2x5IOKAnGRvb3IgbXVsdGlwb2ludCBsb2NraW5n4oCdIOKAlCBub3cgYWxpZ25lZCB0byB5b3VyIOKAnGxvY2thYmxlIGhhbmRsZeKAnSB3b3JkaW5nLjwvU21hbGw+CiAgICAgICAgICA8L2Rpdj4KICAgICAgICA8L2Rpdj4KCiAgICAgICAgey8qIERvb3Igb3B0aW9ucyAqL30KICAgICAgICB7c2hvd0Rvb3JPcHRpb25zICYmICgKICAgICAgICAgIDxkaXYgc3R5bGU9e3sgYm9yZGVyUmFkaXVzOiAxNCwgYm9yZGVyOiAiMXB4IHNvbGlkICNlNGU0ZTciLCBwYWRkaW5nOiAxMiB9fT4KICAgICAgICAgICAgPEgzPkRvb3Igb3B0aW9uczwvSDM+CgogICAgICAgICAgICA8ZGl2IHN0eWxlPXt7IG1hcmdpblRvcDogMTAsIGRpc3BsYXk6ICJncmlkIiwgZ2FwOiAxMCB9fT4KICAgICAgICAgICAgICA8bGFiZWwgc3R5bGU9e3sgZGlzcGxheTogImZsZXgiLCBnYXA6IDgsIGFsaWduSXRlbXM6ICJjZW50ZXIiLCBmb250U2l6ZTogMTQsIGZvbnRXZWlnaHQ6IDcwMCB9fT4KICAgICAgICAgICAgICAgIDxpbnB1dAogICAgICAgICAgICAgICAgICB0eXBlPSJjaGVja2JveCIKICAgICAgICAgICAgICAgICAgY2hlY2tlZD17dmFsdWUuZG9vck11bHRpcG9pbnRMb2NraW5nfQogICAgICAgICAgICAgICAgICBvbkNoYW5nZT17KGUpID0+IG9uQ2hhbmdlKHsgLi4udmFsdWUsIGRvb3JNdWx0aXBvaW50TG9ja2luZzogZS50YXJnZXQuY2hlY2tlZCB9KX0KICAgICAgICAgICAgICAgIC8+CiAgICAgICAgICAgICAgICBNdWx0aXBvaW50IGxvY2tpbmcKICAgICAgICAgICAgICA8L2xhYmVsPgoKICAgICAgICAgICAgICA8bGFiZWwgc3R5bGU9e3sgZGlzcGxheTogImZsZXgiLCBnYXA6IDgsIGFsaWduSXRlbXM6ICJjZW50ZXIiLCBmb250U2l6ZTogMTQsIGZvbnRXZWlnaHQ6IDcwMCB9fT4KICAgICAgICAgICAgICAgIDxpbnB1dAogICAgICAgICAgICAgICAgICB0eXBlPSJjaGVja2JveCIKICAgICAgICAgICAgICAgICAgY2hlY2tlZD17dmFsdWUuZWxlY3RyaWNhbE9wZXJhdGlvbn0KICAgICAgICAgICAgICAgICAgb25DaGFuZ2U9eyhlKSA9PiBvbkNoYW5nZSh7IC4uLnZhbHVlLCBlbGVjdHJpY2FsT3BlcmF0aW9uOiBlLnRhcmdldC5jaGVja2VkIH0pfQogICAgICAgICAgICAgICAgLz4KICAgICAgICAgICAgICAgIEVsZWN0cmljYWwgb3BlcmF0aW9uCiAgICAgICAgICAgICAgPC9sYWJlbD4KCiAgICAgICAgICAgICAgPGxhYmVsIHN0eWxlPXt7IGRpc3BsYXk6ICJmbGV4IiwgZ2FwOiA4LCBhbGlnbkl0ZW1zOiAiY2VudGVyIiwgZm9udFNpemU6IDE0LCBmb250V2VpZ2h0OiA3MDAgfX0+CiAgICAgICAgICAgICAgICA8aW5wdXQKICAgICAgICAgICAgICAgICAgdHlwZT0iY2hlY2tib3giCiAgICAgICAgICAgICAgICAgIGNoZWNrZWQ9e3ZhbHVlLmRheUxhdGNofQogICAgICAgICAgICAgICAgICBvbkNoYW5nZT17KGUpID0+IG9uQ2hhbmdlKHsgLi4udmFsdWUsIGRheUxhdGNoOiBlLnRhcmdldC5jaGVja2VkIH0pfQogICAgICAgICAgICAgICAgLz4KICAgICAgICAgICAgICAgIERheSBsYXRjaAogICAgICAgICAgICAgIDwvbGFiZWw+CiAgICAgICAgICAgIDwvZGl2PgogICAgICAgICAgPC9kaXY+CiAgICAgICAgKX0KCiAgICAgICAgey8qIEFjY2Vzc29yaWVzICovfQogICAgICAgIDxkaXYgc3R5bGU9e3sgYm9yZGVyUmFkaXVzOiAxNCwgYm9yZGVyOiAiMXB4IHNvbGlkICNlNGU0ZTciLCBwYWRkaW5nOiAxMiB9fT4KICAgICAgICAgIDxIMz5BY2Nlc3NvcmllczwvSDM+CgogICAgICAgICAgPGRpdiBzdHlsZT17eyBtYXJnaW5Ub3A6IDEwLCBkaXNwbGF5OiAiZ3JpZCIsIGdhcDogMTIgfX0+CiAgICAgICAgICAgIDxkaXYgc3R5bGU9e3sgZGlzcGxheTogImdyaWQiLCBncmlkVGVtcGxhdGVDb2x1bW5zOiAiMWZyIDFmciIsIGdhcDogMTIgfX0+CiAgICAgICAgICAgICAgPGxhYmVsIHN0eWxlPXt7IGRpc3BsYXk6ICJmbGV4IiwgZ2FwOiA4LCBhbGlnbkl0ZW1zOiAiY2VudGVyIiwgZm9udFNpemU6IDE0LCBmb250V2VpZ2h0OiA3MDAgfX0+CiAgICAgICAgICAgICAgICA8aW5wdXQKICAgICAgICAgICAgICAgICAgdHlwZT0iY2hlY2tib3giCiAgICAgICAgICAgICAgICAgIGNoZWNrZWQ9e3ZhbHVlLmludGVybmFsQ2lsbFJlcXVpcmVkfQogICAgICAgICAgICAgICAgICBvbkNoYW5nZT17KGUpID0+IG9uQ2hhbmdlKHsgLi4udmFsdWUsIGludGVybmFsQ2lsbFJlcXVpcmVkOiBlLnRhcmdldC5jaGVja2VkIH0pfQogICAgICAgICAgICAgICAgLz4KICAgICAgICAgICAgICAgIFdpbmRvdyBjaWxsIGludGVybmFsbHkgcmVxdWlyZWQKICAgICAgICAgICAgICA8L2xhYmVsPgoKICAgICAgICAgICAgICA8bGFiZWwgc3R5bGU9e3sgZGlzcGxheTogImZsZXgiLCBnYXA6IDgsIGFsaWduSXRlbXM6ICJjZW50ZXIiLCBmb250U2l6ZTogMTQsIGZvbnRXZWlnaHQ6IDcwMCB9fT4KICAgICAgICAgICAgICAgIDxpbnB1dAogICAgICAgICAgICAgICAgICB0eXBlPSJjaGVja2JveCIKICAgICAgICAgICAgICAgICAgY2hlY2tlZD17dmFsdWUuZXh0ZXJuYWxTaWxsUmVxdWlyZWR9CiAgICAgICAgICAgICAgICAgIG9uQ2hhbmdlPXsoZSkgPT4gb25DaGFuZ2UoeyAuLi52YWx1ZSwgZXh0ZXJuYWxTaWxsUmVxdWlyZWQ6IGUudGFyZ2V0LmNoZWNrZWQgfSl9CiAgICAgICAgICAgICAgICAvPgogICAgICAgICAgICAgICAgV2luZG93IHNpbGwgZXh0ZXJuYWxseSByZXF1aXJlZAogICAgICAgICAgICAgIDwvbGFiZWw+CiAgICAgICAgICAgIDwvZGl2PgoKICAgICAgICAgICAgPGRpdiBzdHlsZT17eyBkaXNwbGF5OiAiZ3JpZCIsIGdyaWRUZW1wbGF0ZUNvbHVtbnM6ICIxZnIgMWZyIiwgZ2FwOiAxMiB9fT4KICAgICAgICAgICAgICA8ZGl2PgogICAgICAgICAgICAgICAgPGRpdiBzdHlsZT17bGFiZWxTdHlsZX0+V2luZG93IGNpbGwgZGVwdGg8L2Rpdj4KICAgICAgICAgICAgICAgIDxzZWxlY3QKICAgICAgICAgICAgICAgICAgdmFsdWU9e1N0cmluZyh2YWx1ZS5jaWxsRGVwdGhNbSl9CiAgICAgICAgICAgICAgICAgIG9uQ2hhbmdlPXsoZSkgPT4gb25DaGFuZ2UoeyAuLi52YWx1ZSwgY2lsbERlcHRoTW06IE51bWJlcihlLnRhcmdldC52YWx1ZSkgfSl9CiAgICAgICAgICAgICAgICAgIHN0eWxlPXt7IHdpZHRoOiAiMTAwJSIsIGJvcmRlclJhZGl1czogMTIsIGJvcmRlcjogIjFweCBzb2xpZCAjZTRlNGU3IiwgcGFkZGluZzogIjEwcHggMTJweCIsIGZvbnRTaXplOiAxNCB9fQogICAgICAgICAgICAgICAgPgogICAgICAgICAgICAgICAgICB7Q0lMTF9ERVBUSFMubWFwKChkKSA9PiAoCiAgICAgICAgICAgICAgICAgICAgPG9wdGlvbiBrZXk9e2R9IHZhbHVlPXtkfT4KICAgICAgICAgICAgICAgICAgICAgIHtkfSBtbQogICAgICAgICAgICAgICAgICAgIDwvb3B0aW9uPgogICAgICAgICAgICAgICAgICApKX0KICAgICAgICAgICAgICAgIDwvc2VsZWN0PgogICAgICAgICAgICAgIDwvZGl2PgoKICAgICAgICAgICAgICA8ZGl2PgogICAgICAgICAgICAgICAgPGRpdiBzdHlsZT17bGFiZWxTdHlsZX0+Q2lsbCBlbmQgY2FwIHR5cGU8L2Rpdj4KICAgICAgICAgICAgICAgIDxzZWxlY3QKICAgICAgICAgICAgICAgICAgdmFsdWU9e3ZhbHVlLmNpbGxFbmRDYXBUeXBlfQogICAgICAgICAgICAgICAgICBvbkNoYW5nZT17KGUpID0+IG9uQ2hhbmdlKHsgLi4udmFsdWUsIGNpbGxFbmRDYXBUeXBlOiBlLnRhcmdldC52YWx1ZSBhcyBhbnkgfSl9CiAgICAgICAgICAgICAgICAgIHN0eWxlPXt7IHdpZHRoOiAiMTAwJSIsIGJvcmRlclJhZGl1czogMTIsIGJvcmRlcjogIjFweCBzb2xpZCAjZTRlNGU3IiwgcGFkZGluZzogIjEwcHggMTJweCIsIGZvbnRTaXplOiAxNCB9fQogICAgICAgICAgICAgICAgPgogICAgICAgICAgICAgICAgICA8b3B0aW9uIHZhbHVlPSJDbGFkZGluZy9SZW5kZXIgRW5kIENhcCI+Q2xhZGRpbmcvUmVuZGVyIEVuZCBDYXA8L29wdGlvbj4KICAgICAgICAgICAgICAgICAgPG9wdGlvbiB2YWx1ZT0iQnJpY2sgVHlwZSBFbmQgQ2FwIj5CcmljayBUeXBlIEVuZCBDYXA8L29wdGlvbj4KICAgICAgICAgICAgICAgIDwvc2VsZWN0PgogICAgICAgICAgICAgIDwvZGl2PgogICAgICAgICAgICA8L2Rpdj4KCiAgICAgICAgICAgIDxkaXY+CiAgICAgICAgICAgICAgPEgzPkZyYW1lIGV4dGVuc2lvbnM8L0gzPgogICAgICAgICAgICAgIDxTbWFsbD5TZXQgZWFjaCBzaWRlIGluZGVwZW5kZW50bHkuPC9TbWFsbD4KCiAgICAgICAgICAgICAgPGRpdiBzdHlsZT17eyBtYXJnaW5Ub3A6IDEwLCBkaXNwbGF5OiAiZ3JpZCIsIGdyaWRUZW1wbGF0ZUNvbHVtbnM6ICIxZnIgMWZyIDFmciAxZnIiLCBnYXA6IDEyIH19PgogICAgICAgICAgICAgICAge1sKICAgICAgICAgICAgICAgICAgWyJMZWZ0IiwgImZyYW1lRXh0TGVmdE1tIl0sCiAgICAgICAgICAgICAgICAgIFsiUmlnaHQiLCAiZnJhbWVFeHRSaWdodE1tIl0sCiAgICAgICAgICAgICAgICAgIFsiVG9wIiwgImZyYW1lRXh0VG9wTW0iXSwKICAgICAgICAgICAgICAgICAgWyJCb3R0b20iLCAiZnJhbWVFeHRCb3R0b21NbSJdLAogICAgICAgICAgICAgICAgXS5tYXAoKFtsYWJlbCwga2V5XSkgPT4gKAogICAgICAgICAgICAgICAgICA8ZGl2IGtleT17a2V5fT4KICAgICAgICAgICAgICAgICAgICA8ZGl2IHN0eWxlPXtsYWJlbFN0eWxlfT57bGFiZWx9PC9kaXY+CiAgICAgICAgICAgICAgICAgICAgPHNlbGVjdAogICAgICAgICAgICAgICAgICAgICAgdmFsdWU9e1N0cmluZygodmFsdWUgYXMgYW55KVtrZXldKX0KICAgICAgICAgICAgICAgICAgICAgIG9uQ2hhbmdlPXsoZSkgPT4gb25DaGFuZ2UoeyAuLi52YWx1ZSwgW2tleV06IE51bWJlcihlLnRhcmdldC52YWx1ZSkgfSBhcyBhbnkpfQogICAgICAgICAgICAgICAgICAgICAgc3R5bGU9e3sgd2lkdGg6ICIxMDAlIiwgYm9yZGVyUmFkaXVzOiAxMiwgYm9yZGVyOiAiMXB4IHNvbGlkICNlNGU0ZTciLCBwYWRkaW5nOiAiMTBweCAxMnB4IiwgZm9udFNpemU6IDE0IH19CiAgICAgICAgICAgICAgICAgICAgPgogICAgICAgICAgICAgICAgICAgICAge0ZSQU1FX0VYVFMubWFwKChtbSkgPT4gKAogICAgICAgICAgICAgICAgICAgICAgICA8b3B0aW9uIGtleT17bW19IHZhbHVlPXttbX0+CiAgICAgICAgICAgICAgICAgICAgICAgICAge21tfSBtbQogICAgICAgICAgICAgICAgICAgICAgICA8L29wdGlvbj4KICAgICAgICAgICAgICAgICAgICAgICkpfQogICAgICAgICAgICAgICAgICAgIDwvc2VsZWN0PgogICAgICAgICAgICAgICAgICA8L2Rpdj4KICAgICAgICAgICAgICAgICkpfQogICAgICAgICAgICAgIDwvZGl2PgogICAgICAgICAgICA8L2Rpdj4KCiAgICAgICAgICAgIDxkaXY+CiAgICAgICAgICAgICAgPGxhYmVsIHN0eWxlPXt7IGRpc3BsYXk6ICJmbGV4IiwgZ2FwOiA4LCBhbGlnbkl0ZW1zOiAiY2VudGVyIiwgZm9udFNpemU6IDE0LCBmb250V2VpZ2h0OiA3MDAgfX0+CiAgICAgICAgICAgICAgICA8aW5wdXQKICAgICAgICAgICAgICAgICAgdHlwZT0iY2hlY2tib3giCiAgICAgICAgICAgICAgICAgIGNoZWNrZWQ9e3ZhbHVlLnN1blByb3RlY3Rpb25SZXF1aXJlZH0KICAgICAgICAgICAgICAgICAgb25DaGFuZ2U9eyhlKSA9PiBvbkNoYW5nZSh7IC4uLnZhbHVlLCBzdW5Qcm90ZWN0aW9uUmVxdWlyZWQ6IGUudGFyZ2V0LmNoZWNrZWQgfSl9CiAgICAgICAgICAgICAgICAvPgogICAgICAgICAgICAgICAgU3VuIHByb3RlY3Rpb24gcmVxdWlyZWQKICAgICAgICAgICAgICA8L2xhYmVsPgoKICAgICAgICAgICAgICB7dmFsdWUuc3VuUHJvdGVjdGlvblJlcXVpcmVkICYmICgKICAgICAgICAgICAgICAgIDxkaXYgc3R5bGU9e3sgbWFyZ2luVG9wOiAxMCB9fT4KICAgICAgICAgICAgICAgICAgPGRpdiBzdHlsZT17bGFiZWxTdHlsZX0+VHlwZTwvZGl2PgogICAgICAgICAgICAgICAgICA8c2VsZWN0CiAgICAgICAgICAgICAgICAgICAgdmFsdWU9e3ZhbHVlLnN1blByb3RlY3Rpb25UeXBlfQogICAgICAgICAgICAgICAgICAgIG9uQ2hhbmdlPXsoZSkgPT4gb25DaGFuZ2UoeyAuLi52YWx1ZSwgc3VuUHJvdGVjdGlvblR5cGU6IGUudGFyZ2V0LnZhbHVlIGFzIGFueSB9KX0KICAgICAgICAgICAgICAgICAgICBzdHlsZT17eyB3aWR0aDogIjEwMCUiLCBib3JkZXJSYWRpdXM6IDEyLCBib3JkZXI6ICIxcHggc29saWQgI2U0ZTRlNyIsIHBhZGRpbmc6ICIxMHB4IDEycHgiLCBmb250U2l6ZTogMTQgfX0KICAgICAgICAgICAgICAgICAgPgogICAgICAgICAgICAgICAgICAgIHtTVU5fUFJPVEVDVElPTi5tYXAoKHQpID0+ICgKICAgICAgICAgICAgICAgICAgICAgIDxvcHRpb24ga2V5PXt0fSB2YWx1ZT17dH0+CiAgICAgICAgICAgICAgICAgICAgICAgIHt0fQogICAgICAgICAgICAgICAgICAgICAgPC9vcHRpb24+CiAgICAgICAgICAgICAgICAgICAgKSl9CiAgICAgICAgICAgICAgICAgIDwvc2VsZWN0PgogICAgICAgICAgICAgICAgPC9kaXY+CiAgICAgICAgICAgICAgKX0KICAgICAgICAgICAgPC9kaXY+CiAgICAgICAgICA8L2Rpdj4KICAgICAgICA8L2Rpdj4KICAgICAgPC9kaXY+CiAgICA8L2Rpdj4KICApOwp9CgovKiA9PT09PT09PT09PT09PT09PT09PT09PT09CiAgIE1haW4gQXBwCj09PT09PT09PT09PT09PT09PT09PT09PT0gKi8KCmV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uIEFwcCgpIHsKICBjb25zdCBbbWVudSwgc2V0TWVudV0gPSB1c2VTdGF0ZTxNZW51S2V5PigiY3VzdG9tZXJzX2J1c2luZXNzIik7CiAgY29uc3QgW3ZpZXcsIHNldFZpZXddID0gdXNlU3RhdGU8Vmlldz4oImN1c3RvbWVycyIpOwoKICBjb25zdCBbY2xpZW50Q291bnRlciwgc2V0Q2xpZW50Q291bnRlcl0gPSB1c2VTdGF0ZSgzKTsKICBjb25zdCBbZXN0aW1hdGVDb3VudGVyLCBzZXRFc3RpbWF0ZUNvdW50ZXJdID0gdXNlU3RhdGUoMSk7CgogIGNvbnN0IFtjbGllbnRzLCBzZXRDbGllbnRzXSA9IHVzZVN0YXRlPENsaWVudFtdPigoKSA9PiBtYWtlRGVmYXVsdENsaWVudHMoKSk7CgogIGNvbnN0IFtzZWxlY3RlZENsaWVudElkLCBzZXRTZWxlY3RlZENsaWVudElkXSA9IHVzZVN0YXRlPHN0cmluZyB8IG51bGw+KG51bGwpOwogIGNvbnN0IHNlbGVjdGVkQ2xpZW50ID0gdXNlTWVtbygoKSA9PiBjbGllbnRzLmZpbmQoKGMpID0+IGMuaWQgPT09IHNlbGVjdGVkQ2xpZW50SWQpID8/IG51bGwsIFtjbGllbnRzLCBzZWxlY3RlZENsaWVudElkXSk7CgogIGNvbnN0IFtzZWxlY3RlZEVzdGltYXRlSWQsIHNldFNlbGVjdGVkRXN0aW1hdGVJZF0gPSB1c2VTdGF0ZTxzdHJpbmcgfCBudWxsPihudWxsKTsKICBjb25zdCBzZWxlY3RlZEVzdGltYXRlID0gdXNlTWVtbygoKSA9PiB7CiAgICBpZiAoIXNlbGVjdGVkQ2xpZW50KSByZXR1cm4gbnVsbDsKICAgIHJldHVybiBzZWxlY3RlZENsaWVudC5lc3RpbWF0ZXMuZmluZCgoZSkgPT4gZS5pZCA9PT0gc2VsZWN0ZWRFc3RpbWF0ZUlkKSA/PyBudWxsOwogIH0sIFtzZWxlY3RlZENsaWVudCwgc2VsZWN0ZWRFc3RpbWF0ZUlkXSk7CgogIC8vIGVzdGltYXRlIHBpY2tlcgogIGNvbnN0IFtwaWNrZXJDbGllbnRJZCwgc2V0UGlja2VyQ2xpZW50SWRdID0gdXNlU3RhdGU8c3RyaW5nIHwgbnVsbD4obnVsbCk7CiAgY29uc3QgcGlja2VyQ2xpZW50ID0gdXNlTWVtbygoKSA9PiBjbGllbnRzLmZpbmQoKGMpID0+IGMuaWQgPT09IHBpY2tlckNsaWVudElkKSA/PyBudWxsLCBbY2xpZW50cywgcGlja2VyQ2xpZW50SWRdKTsKCiAgLy8gQWRkIGNsaWVudCBVSSAoa2VwdCBzaW1wbGU7IHlvdXIgY3VycmVudCBhZGQgZm9ybSBjYW4gYmUgcmUtbWVyZ2VkIGlmIG5lZWRlZCkKICBjb25zdCBbc2hvd0FkZENsaWVudCwgc2V0U2hvd0FkZENsaWVudF0gPSB1c2VTdGF0ZShmYWxzZSk7CiAgY29uc3QgW2RyYWZ0Q2xpZW50TmFtZSwgc2V0RHJhZnRDbGllbnROYW1lXSA9IHVzZVN0YXRlKCIiKTsKICBjb25zdCBbZHJhZnRCdXNpbmVzc05hbWUsIHNldERyYWZ0QnVzaW5lc3NOYW1lXSA9IHVzZVN0YXRlKCIiKTsKICBjb25zdCBbZHJhZnRFbWFpbCwgc2V0RHJhZnRFbWFpbF0gPSB1c2VTdGF0ZSgiIik7CiAgY29uc3QgW2RyYWZ0TW9iaWxlLCBzZXREcmFmdE1vYmlsZV0gPSB1c2VTdGF0ZSgiIik7CiAgY29uc3QgW2RyYWZ0SG9tZSwgc2V0RHJhZnRIb21lXSA9IHVzZVN0YXRlKCIiKTsKCiAgLy8gUG9zaXRpb24gd2l6YXJkIChzdXBwbGllci9wcm9kdWN0IHJlbW92ZWQgZnJvbSBmbG93KQogIGNvbnN0IFtzaG93UG9zaXRpb25XaXphcmQsIHNldFNob3dQb3NpdGlvbldpemFyZF0gPSB1c2VTdGF0ZShmYWxzZSk7CiAgY29uc3QgW3Bvc1N0ZXAsIHNldFBvc1N0ZXBdID0gdXNlU3RhdGU8MSB8IDIgfCAzPigxKTsgLy8gMSBQb3NpdGlvbiwgMiBEaW1lbnNpb25zLCAzIENvbmZpZ3VyYXRpb24KICBjb25zdCBbcG9zRHJhZnQsIHNldFBvc0RyYWZ0XSA9IHVzZVN0YXRlPFBvc2l0aW9uPigoKSA9PiAoewogICAgaWQ6IHVpZCgpLAogICAgcG9zaXRpb25SZWY6ICJXLTAwMSIsCiAgICBxdHk6IDEsCiAgICByb29tTmFtZTogIiIsCiAgICB3aWR0aE1tOiAxMDAwLAogICAgaGVpZ2h0TW06IDEyMDAsCiAgICBmaWVsZHNYOiAxLAogICAgZmllbGRzWTogMSwKICAgIGluc2VydGlvbjogIkZpeGVkIiwKICAgIGNlbGxJbnNlcnRpb25zOiB7ICIwLDAiOiAiRml4ZWQiIH0sCiAgICBwb3NpdGlvblR5cGU6ICJXaW5kb3ciLAogICAgdXNlRXN0aW1hdGVEZWZhdWx0czogdHJ1ZSwKICAgIG92ZXJyaWRlczoge30sCiAgfSkpOwoKICAvLyBBZGQgUG9zaXRpb24gLyBDb25maWd1cmF0aW9uIHN0ZXAgaGVscGVycwogIGNvbnN0IFtkcmFmdFNlbGVjdGVkQ2VsbCwgc2V0RHJhZnRTZWxlY3RlZENlbGxdID0gdXNlU3RhdGU8eyBjb2w6IG51bWJlcjsgcm93OiBudW1iZXIgfT4oeyBjb2w6IDAsIHJvdzogMCB9KTsKICBjb25zdCBbcHJldmlld1ZpZXcsIHNldFByZXZpZXdWaWV3XSA9IHVzZVN0YXRlPCJJbnNpZGUiIHwgIk91dHNpZGUiPigiSW5zaWRlIik7CiAgY29uc3QgW29wZW5pbmdTdGQsIHNldE9wZW5pbmdTdGRdID0gdXNlU3RhdGU8IkRJTiIgfCAiVUsiPigiRElOIik7CgogIGNvbnN0IGFjdGl2ZUNsaWVudFR5cGU6IENsaWVudFR5cGUgPSBtZW51ID09PSAiY3VzdG9tZXJzX2J1c2luZXNzIiA/ICJCdXNpbmVzcyIgOiAiSW5kaXZpZHVhbCI7CiAgY29uc3QgZmlsdGVyZWRDbGllbnRzID0gdXNlTWVtbygoKSA9PiBjbGllbnRzLmZpbHRlcigoYykgPT4gYy50eXBlID09PSBhY3RpdmVDbGllbnRUeXBlKSwgW2NsaWVudHMsIGFjdGl2ZUNsaWVudFR5cGVdKTsKCiAgZnVuY3Rpb24gc2VsZWN0TWVudShrOiBNZW51S2V5KSB7CiAgICBzZXRNZW51KGspOwogICAgc2V0VmlldygiY3VzdG9tZXJzIik7CiAgICBzZXRTZWxlY3RlZENsaWVudElkKG51bGwpOwogICAgc2V0U2VsZWN0ZWRFc3RpbWF0ZUlkKG51bGwpOwogICAgc2V0UGlja2VyQ2xpZW50SWQobnVsbCk7CiAgICBzZXRTaG93QWRkQ2xpZW50KGZhbHNlKTsKICAgIHNldFNob3dQb3NpdGlvbldpemFyZChmYWxzZSk7CiAgfQoKICBmdW5jdGlvbiBvcGVuRXN0aW1hdGVXb3Jrc3BhY2UoY2xpZW50SWQ6IHN0cmluZywgZXN0aW1hdGVJZDogc3RyaW5nKSB7CiAgICBzZXRTZWxlY3RlZENsaWVudElkKGNsaWVudElkKTsKICAgIHNldFNlbGVjdGVkRXN0aW1hdGVJZChlc3RpbWF0ZUlkKTsKICAgIHNldFZpZXcoImVzdGltYXRlX3dvcmtzcGFjZSIpOwogICAgc2V0U2hvd1Bvc2l0aW9uV2l6YXJkKGZhbHNlKTsKICB9CgogIGZ1bmN0aW9uIG9wZW5Fc3RpbWF0ZURlZmF1bHRzKGNsaWVudElkOiBzdHJpbmcsIGVzdGltYXRlSWQ6IHN0cmluZykgewogICAgc2V0U2VsZWN0ZWRDbGllbnRJZChjbGllbnRJZCk7CiAgICBzZXRTZWxlY3RlZEVzdGltYXRlSWQoZXN0aW1hdGVJZCk7CiAgICBzZXRWaWV3KCJlc3RpbWF0ZV9kZWZhdWx0cyIpOwogICAgc2V0U2hvd1Bvc2l0aW9uV2l6YXJkKGZhbHNlKTsKICB9CgogIGZ1bmN0aW9uIGNyZWF0ZUVzdGltYXRlRm9yQ2xpZW50KGNsaWVudDogQ2xpZW50KSB7CiAgICBjb25zdCB5ZWFyID0gbmV3IERhdGUoKS5nZXRGdWxsWWVhcigpOwogICAgY29uc3QgYmFzZSA9IG5leHRFc3RpbWF0ZUJhc2VSZWYoeWVhciwgZXN0aW1hdGVDb3VudGVyKTsKCiAgICBjb25zdCBlc3Q6IEVzdGltYXRlID0gewogICAgICBpZDogdWlkKCksCiAgICAgIGVzdGltYXRlUmVmOiBiYXNlLAogICAgICBiYXNlRXN0aW1hdGVSZWY6IGJhc2UsCiAgICAgIHJldmlzaW9uTm86IDAsCiAgICAgIHN0YXR1czogIkRyYWZ0IiwKICAgICAgZGVmYXVsdHM6IG1ha2VEZWZhdWx0RXN0aW1hdGVEZWZhdWx0cygpLAogICAgICBwb3NpdGlvbnM6IFtdLAogICAgfTsKCiAgICBzZXRFc3RpbWF0ZUNvdW50ZXIoKG4pID0+IG4gKyAxKTsKCiAgICBzZXRDbGllbnRzKChwcmV2KSA9PgogICAgICBwcmV2Lm1hcCgoYykgPT4gKGMuaWQgPT09IGNsaWVudC5pZCA/IHsgLi4uYywgZXN0aW1hdGVzOiBbZXN0LCAuLi5jLmVzdGltYXRlc10gfSA6IGMpKQogICAgKTsKCiAgICAvLyBJTVBPUlRBTlQ6IGdvIHRvIFN1cHBsaWVyICYgUHJvZHVjdCBEZWZhdWx0cyBzY3JlZW4gaW1tZWRpYXRlbHkKICAgIG9wZW5Fc3RpbWF0ZURlZmF1bHRzKGNsaWVudC5pZCwgZXN0LmlkKTsKICB9CgogIGZ1bmN0aW9uIG9wZW5DbGllbnQoY2xpZW50OiBDbGllbnQpIHsKICAgIHNldFNlbGVjdGVkQ2xpZW50SWQoY2xpZW50LmlkKTsKCiAgICBpZiAoY2xpZW50LmVzdGltYXRlcy5sZW5ndGggPT09IDApIHsKICAgICAgY3JlYXRlRXN0aW1hdGVGb3JDbGllbnQoY2xpZW50KTsKICAgICAgcmV0dXJuOwogICAgfQoKICAgIGlmIChjbGllbnQuZXN0aW1hdGVzLmxlbmd0aCA9PT0gMSkgewogICAgICBvcGVuRXN0aW1hdGVEZWZhdWx0cyhjbGllbnQuaWQsIGNsaWVudC5lc3RpbWF0ZXNbMF0uaWQpOwogICAgICByZXR1cm47CiAgICB9CgogICAgLy8gbXVsdGlwbGUgZXN0aW1hdGVzID0+IHNob3cgcGlja2VyIGxpc3QKICAgIHNldFBpY2tlckNsaWVudElkKGNsaWVudC5pZCk7CiAgICBzZXRWaWV3KCJlc3RpbWF0ZV9waWNrZXIiKTsKICB9CgogIGZ1bmN0aW9uIG9wZW5Fc3RpbWF0ZUZyb21QaWNrZXIoZXN0aW1hdGVJZDogc3RyaW5nKSB7CiAgICBpZiAoIXBpY2tlckNsaWVudElkKSByZXR1cm47CiAgICBvcGVuRXN0aW1hdGVEZWZhdWx0cyhwaWNrZXJDbGllbnRJZCwgZXN0aW1hdGVJZCk7CiAgfQoKICBmdW5jdGlvbiBzdGFydEFkZFBvc2l0aW9uKCkgewogICAgaWYgKCFzZWxlY3RlZEVzdGltYXRlKSByZXR1cm47CgogICAgY29uc3QgbmV4dEluZGV4ID0gKHNlbGVjdGVkRXN0aW1hdGUucG9zaXRpb25zPy5sZW5ndGggPz8gMCkgKyAxOwoKICAgIHNldFBvc1N0ZXAoMSk7CiAgICAgIHNldERyYWZ0U2VsZWN0ZWRDZWxsKHsgY29sOiAwLCByb3c6IDAgfSk7CiAgICBzZXRQb3NEcmFmdCh7CiAgICAgIGlkOiB1aWQoKSwKICAgICAgcG9zaXRpb25SZWY6IGBXLSR7cGFkMyhuZXh0SW5kZXgpfWAsCiAgICAgIHF0eTogMSwKICAgICAgcm9vbU5hbWU6ICIiLAogICAgICB3aWR0aE1tOiAxMDAwLAogICAgICBoZWlnaHRNbTogMTIwMCwKICAgICAgZmllbGRzWDogMSwKICAgICAgZmllbGRzWTogMSwKICAgICAgaW5zZXJ0aW9uOiAiRml4ZWQiLAogICAgICBwb3NpdGlvblR5cGU6ICJXaW5kb3ciLAogICAgICB1c2VFc3RpbWF0ZURlZmF1bHRzOiB0cnVlLAogICAgICBvdmVycmlkZXM6IHt9LAogICAgfSk7CiAgICBzZXRTaG93UG9zaXRpb25XaXphcmQodHJ1ZSk7CiAgfQoKICBmdW5jdGlvbiBzYXZlUG9zaXRpb25Ub0VzdGltYXRlKCkgewogICAgaWYgKCFzZWxlY3RlZENsaWVudCB8fCAhc2VsZWN0ZWRFc3RpbWF0ZSkgcmV0dXJuOwoKICAgIGNvbnN0IG5ld1BvczogUG9zaXRpb24gPSB7CiAgICAgIC4uLnBvc0RyYWZ0LAogICAgICBpZDogdWlkKCksCiAgICAgIHdpZHRoTW06IGNsYW1wTnVtKE1hdGgucm91bmQocG9zRHJhZnQud2lkdGhNbSB8fCAwKSwgMzAwLCA2MDAwKSwKICAgICAgaGVpZ2h0TW06IGNsYW1wTnVtKE1hdGgucm91bmQocG9zRHJhZnQuaGVpZ2h0TW0gfHwgMCksIDMwMCwgNjAwMCksCiAgICAgIGZpZWxkc1g6IGNsYW1wTnVtKE1hdGgucm91bmQocG9zRHJhZnQuZmllbGRzWCB8fCAxKSwgMSwgMTYpLAogICAgICBmaWVsZHNZOiBjbGFtcE51bShNYXRoLnJvdW5kKHBvc0RyYWZ0LmZpZWxkc1kgfHwgMSksIDEsIDE2KSwKICAgIH07CgogICAgc2V0Q2xpZW50cygocHJldikgPT4KICAgICAgcHJldi5tYXAoKGMpID0+IHsKICAgICAgICBpZiAoYy5pZCAhPT0gc2VsZWN0ZWRDbGllbnQuaWQpIHJldHVybiBjOwogICAgICAgIHJldHVybiB7CiAgICAgICAgICAuLi5jLAogICAgICAgICAgZXN0aW1hdGVzOiBjLmVzdGltYXRlcy5tYXAoKGUpID0+IHsKICAgICAgICAgICAgaWYgKGUuaWQgIT09IHNlbGVjdGVkRXN0aW1hdGUuaWQpIHJldHVybiBlOwogICAgICAgICAgICByZXR1cm4geyAuLi5lLCBwb3NpdGlvbnM6IFtuZXdQb3MsIC4uLmUucG9zaXRpb25zXSB9OwogICAgICAgICAgfSksCiAgICAgICAgfTsKICAgICAgfSkKICAgICk7CgogICAgc2V0U2hvd1Bvc2l0aW9uV2l6YXJkKGZhbHNlKTsKICAgIHNldFBvc1N0ZXAoMSk7CiAgfQoKICBmdW5jdGlvbiBzdGVwTGFiZWwoczogMSB8IDIgfCAzKSB7CiAgICByZXR1cm4gcyA9PT0gMSA/ICJQb3NpdGlvbiIgOiBzID09PSAyID8gIkRpbWVuc2lvbnMiIDogIkNvbmZpZ3VyYXRpb24iOwogIH0KCiAgZnVuY3Rpb24gZWZmZWN0aXZlRGVmYXVsdHNGb3JQb3NpdGlvbihlc3Q6IEVzdGltYXRlLCBwb3M6IFBvc2l0aW9uKTogRXN0aW1hdGVEZWZhdWx0cyB7CiAgICBpZiAocG9zLnVzZUVzdGltYXRlRGVmYXVsdHMpIHJldHVybiBlc3QuZGVmYXVsdHM7CiAgICAvLyBtZXJnZSBlc3RpbWF0ZSBkZWZhdWx0cyArIG92ZXJyaWRlcwogICAgcmV0dXJuIHsgLi4uZXN0LmRlZmF1bHRzLCAuLi5wb3Mub3ZlcnJpZGVzIH07CiAgfQoKICBmdW5jdGlvbiBzZXRFc3RpbWF0ZURlZmF1bHRzKG5leHQ6IEVzdGltYXRlRGVmYXVsdHMpIHsKICAgIGlmICghc2VsZWN0ZWRDbGllbnQgfHwgIXNlbGVjdGVkRXN0aW1hdGUpIHJldHVybjsKICAgIHNldENsaWVudHMoKHByZXYpID0+CiAgICAgIHByZXYubWFwKChjKSA9PiB7CiAgICAgICAgaWYgKGMuaWQgIT09IHNlbGVjdGVkQ2xpZW50LmlkKSByZXR1cm4gYzsKICAgICAgICByZXR1cm4gewogICAgICAgICAgLi4uYywKICAgICAgICAgIGVzdGltYXRlczogYy5lc3RpbWF0ZXMubWFwKChlKSA9PiAoZS5pZCA9PT0gc2VsZWN0ZWRFc3RpbWF0ZS5pZCA/IHsgLi4uZSwgZGVmYXVsdHM6IG5leHQgfSA6IGUpKSwKICAgICAgICB9OwogICAgICB9KQogICAgKTsKICB9CgogIGZ1bmN0aW9uIHNldFBvc2l0aW9uRGVmYXVsdHNPdmVycmlkZShuZXh0OiBFc3RpbWF0ZURlZmF1bHRzKSB7CiAgICAvLyBzdG9yZSBvbmx5IGFzIG92ZXJyaWRlcyAoZGlmZmVyZW5jZXMgYXJlIGZpbmUgbGF0ZXI7IGZvciBub3cgc3RvcmUgZnVsbCkKICAgIHNldFBvc0RyYWZ0KChwKSA9PiAoewogICAgICAuLi5wLAogICAgICBvdmVycmlkZXM6IHsKICAgICAgICAuLi5uZXh0LAogICAgICB9LAogICAgfSkpOwogIH0KCiAgZnVuY3Rpb24gY3JlYXRlQ2xpZW50KHR5cGU6IENsaWVudFR5cGUpIHsKICAgIGNvbnN0IG5ld0NsaWVudDogQ2xpZW50ID0gewogICAgICBpZDogdWlkKCksCiAgICAgIHR5cGUsCiAgICAgIGNsaWVudFJlZjogbmV4dENsaWVudFJlZihjbGllbnRDb3VudGVyKSwKICAgICAgY2xpZW50TmFtZTogdHlwZSA9PT0gIkluZGl2aWR1YWwiID8gZHJhZnRDbGllbnROYW1lLnRyaW0oKSA6IGRyYWZ0QnVzaW5lc3NOYW1lLnRyaW0oKSwKICAgICAgZW1haWw6IGRyYWZ0RW1haWwudHJpbSgpLAogICAgICBtb2JpbGU6IGRyYWZ0TW9iaWxlLnRyaW0oKSwKICAgICAgaG9tZTogZHJhZnRIb21lLnRyaW0oKSwKICAgICAgcHJvamVjdE5hbWU6ICIiLAogICAgICBwcm9qZWN0QWRkcmVzczogREVGQVVMVF9DVVNUT01FUl9BRERSRVNTLAogICAgICBpbnZvaWNlQWRkcmVzczogREVGQVVMVF9DVVNUT01FUl9BRERSRVNTLAogICAgICBidXNpbmVzc05hbWU6IHR5cGUgPT09ICJCdXNpbmVzcyIgPyBkcmFmdEJ1c2luZXNzTmFtZS50cmltKCkgOiB1bmRlZmluZWQsCiAgICAgIGNvbnRhY3RQZXJzb246ICIiLAogICAgICBlc3RpbWF0ZXM6IFtdLAogICAgfTsKCiAgICBzZXRDbGllbnRzKChwcmV2KSA9PiBbbmV3Q2xpZW50LCAuLi5wcmV2XSk7CiAgICBzZXRDbGllbnRDb3VudGVyKChuKSA9PiBuICsgMSk7CgogICAgc2V0U2hvd0FkZENsaWVudChmYWxzZSk7CiAgICBzZXREcmFmdENsaWVudE5hbWUoIiIpOwogICAgc2V0RHJhZnRCdXNpbmVzc05hbWUoIiIpOwogICAgc2V0RHJhZnRFbWFpbCgiIik7CiAgICBzZXREcmFmdE1vYmlsZSgiIik7CiAgICBzZXREcmFmdEhvbWUoIiIpOwogIH0KCiAgcmV0dXJuICgKICAgIDxkaXYgc3R5bGU9e3sgZm9udEZhbWlseTogInN5c3RlbS11aSwgLWFwcGxlLXN5c3RlbSwgU2Vnb2UgVUksIFJvYm90bywgQXJpYWwsIHNhbnMtc2VyaWYiLCBiYWNrZ3JvdW5kOiAiI2Y0ZjRmNSIsIG1pbkhlaWdodDogIjEwMHZoIiB9fT4KICAgICAgPGRpdiBzdHlsZT17eyB3aWR0aDogIjEwMCUiLCBtYXJnaW46ICIwIiwgcGFkZGluZzogMTYgfX0+CiAgICAgICAgPGRpdiBzdHlsZT17eyBkaXNwbGF5OiAiZ3JpZCIsIGdyaWRUZW1wbGF0ZUNvbHVtbnM6ICIyODBweCAxZnIiLCBnYXA6IDE2IH19PgogICAgICAgICAgey8qIFNpZGViYXIgKi99CiAgICAgICAgICA8Q2FyZCBzdHlsZT17eyBwYWRkaW5nOiAxMiB9fT4KICAgICAgICAgICAgPGRpdiBzdHlsZT17eyBwYWRkaW5nOiAiNnB4IDZweCAxMnB4IDZweCIgfX0+CiAgICAgICAgICAgICAgPGltZwogICAgICAgICAgICAgICAgc3JjPSIvcXVvdGVzeW5jLWxvZ28ucG5nIgogICAgICAgICAgICAgICAgYWx0PSJRdW90ZVN5bmMiCiAgICAgICAgICAgICAgICBzdHlsZT17ewogICAgICAgICAgICAgICAgICB3aWR0aDogIjEwMCUiLAogICAgICAgICAgICAgICAgICBtYXhXaWR0aDogMjYwLAogICAgICAgICAgICAgICAgICBoZWlnaHQ6IDc4LAogICAgICAgICAgICAgICAgICBvYmplY3RGaXQ6ICJjb250YWluIiwKICAgICAgICAgICAgICAgICAgZGlzcGxheTogImJsb2NrIiwKICAgICAgICAgICAgICAgIH19CiAgICAgICAgICAgICAgLz4KICAgICAgICAgICAgPC9kaXY+CgogICAgICAgICAgICA8ZGl2IHN0eWxlPXt7IG1hcmdpblRvcDogMTQgfX0+CiAgICAgICAgICAgICAgPEgzPkN1c3RvbWVyczwvSDM+CiAgICAgICAgICAgICAgPGRpdiBzdHlsZT17eyBtYXJnaW5Ub3A6IDggfX0+CiAgICAgICAgICAgICAgICA8U2lkZWJhckl0ZW0gbGFiZWw9IkJ1c2luZXNzIEN1c3RvbWVycyIgYWN0aXZlPXttZW51ID09PSAiY3VzdG9tZXJzX2J1c2luZXNzIn0gb25DbGljaz17KCkgPT4gc2VsZWN0TWVudSgiY3VzdG9tZXJzX2J1c2luZXNzIil9IC8+CiAgICAgICAgICAgICAgICA8U2lkZWJhckl0ZW0gbGFiZWw9IkluZGl2aWR1YWwgQ3VzdG9tZXJzIiBhY3RpdmU9e21lbnUgPT09ICJjdXN0b21lcnNfaW5kaXZpZHVhbCJ9IG9uQ2xpY2s9eygpID0+IHNlbGVjdE1lbnUoImN1c3RvbWVyc19pbmRpdmlkdWFsIil9IC8+CiAgICAgICAgICAgICAgPC9kaXY+CiAgICAgICAgICAgIDwvZGl2PgoKICAgICAgICAgICAgPGRpdiBzdHlsZT17eyBtYXJnaW5Ub3A6IDE0IH19PgogICAgICAgICAgICAgIDxIMz5QcmVmZXJlbmNlczwvSDM+CiAgICAgICAgICAgICAgPGRpdiBzdHlsZT17eyBtYXJnaW5Ub3A6IDggfX0+CiAgICAgICAgICAgICAgICA8U2lkZWJhckl0ZW0gbGFiZWw9IlByb2plY3QgUHJlZmVyZW5jZXMiIGFjdGl2ZT17bWVudSA9PT0gInByb2plY3RfcHJlZmVyZW5jZXMifSBvbkNsaWNrPXsoKSA9PiBzZWxlY3RNZW51KCJwcm9qZWN0X3ByZWZlcmVuY2VzIil9IC8+CiAgICAgICAgICAgICAgICA8U2lkZWJhckl0ZW0gbGFiZWw9IkFkZHJlc3MgRGF0YWJhc2UiIGFjdGl2ZT17bWVudSA9PT0gImFkZHJlc3NfZGF0YWJhc2UifSBvbkNsaWNrPXsoKSA9PiBzZWxlY3RNZW51KCJhZGRyZXNzX2RhdGFiYXNlIil9IC8+CiAgICAgICAgICAgICAgPC9kaXY+CiAgICAgICAgICAgIDwvZGl2PgoKICAgICAgICAgICAgPGRpdiBzdHlsZT17eyBtYXJnaW5Ub3A6IDE0IH19PgogICAgICAgICAgICAgIDxIMz5Ub29sczwvSDM+CiAgICAgICAgICAgICAgPGRpdiBzdHlsZT17eyBtYXJnaW5Ub3A6IDggfX0+CiAgICAgICAgICAgICAgICA8U2lkZWJhckl0ZW0gbGFiZWw9IlJlcG9ydHMiIGFjdGl2ZT17bWVudSA9PT0gInJlcG9ydHMifSBvbkNsaWNrPXsoKSA9PiBzZWxlY3RNZW51KCJyZXBvcnRzIil9IC8+CiAgICAgICAgICAgICAgICA8U2lkZWJhckl0ZW0gbGFiZWw9IkNBRCBEcmF3aW5nIiBhY3RpdmU9e21lbnUgPT09ICJjYWRfZHJhd2luZyJ9IG9uQ2xpY2s9eygpID0+IHNlbGVjdE1lbnUoImNhZF9kcmF3aW5nIil9IC8+CiAgICAgICAgICAgICAgICA8U2lkZWJhckl0ZW0gbGFiZWw9IlJlbW90ZSBTdXBwb3J0IiBhY3RpdmU9e21lbnUgPT09ICJyZW1vdGVfc3VwcG9ydCJ9IG9uQ2xpY2s9eygpID0+IHNlbGVjdE1lbnUoInJlbW90ZV9zdXBwb3J0Iil9IC8+CiAgICAgICAgICAgICAgPC9kaXY+CiAgICAgICAgICAgIDwvZGl2PgogICAgICAgICAgPC9DYXJkPgoKICAgICAgICAgIHsvKiBNYWluICovfQogICAgICAgICAgPGRpdiBzdHlsZT17eyBkaXNwbGF5OiAiZ3JpZCIsIGdhcDogMTYgfX0+CiAgICAgICAgICAgIHsvKiBDVVNUT01FUlMgTElTVCAqL30KICAgICAgICAgICAgeyhtZW51ID09PSAiY3VzdG9tZXJzX2J1c2luZXNzIiB8fCBtZW51ID09PSAiY3VzdG9tZXJzX2luZGl2aWR1YWwiKSAmJiB2aWV3ID09PSAiY3VzdG9tZXJzIiAmJiAoCiAgICAgICAgICAgICAgPENhcmQgc3R5bGU9e3sgbWluSGVpZ2h0OiA1MjAgfX0+CiAgICAgICAgICAgICAgICA8ZGl2IHN0eWxlPXt7IGRpc3BsYXk6ICJmbGV4IiwgYWxpZ25JdGVtczogImZsZXgtc3RhcnQiLCBqdXN0aWZ5Q29udGVudDogInNwYWNlLWJldHdlZW4iLCBnYXA6IDEyIH19PgogICAgICAgICAgICAgICAgICA8ZGl2PgogICAgICAgICAgICAgICAgICAgIDxIMj57bWVudSA9PT0gImN1c3RvbWVyc19idXNpbmVzcyIgPyAiQnVzaW5lc3MgQ3VzdG9tZXJzIiA6ICJJbmRpdmlkdWFsIEN1c3RvbWVycyJ9PC9IMj4KICAgICAgICAgICAgICAgICAgICA8U21hbGw+T3BlbiBhIGNsaWVudCB0byBjaG9vc2UgYW4gZXN0aW1hdGUgKG9yIGNyZWF0ZSBvbmUpLjwvU21hbGw+CiAgICAgICAgICAgICAgICAgIDwvZGl2PgoKICAgICAgICAgICAgICAgICAgPEJ1dHRvbiB2YXJpYW50PSJwcmltYXJ5IiBvbkNsaWNrPXsoKSA9PiBzZXRTaG93QWRkQ2xpZW50KHRydWUpfT4KICAgICAgICAgICAgICAgICAgICBBZGQgQ2xpZW50CiAgICAgICAgICAgICAgICAgIDwvQnV0dG9uPgogICAgICAgICAgICAgICAgPC9kaXY+CgogICAgICAgICAgICAgICAge3Nob3dBZGRDbGllbnQgJiYgKAogICAgICAgICAgICAgICAgICA8ZGl2IHN0eWxlPXt7IG1hcmdpblRvcDogMTQsIGJvcmRlclJhZGl1czogMTYsIGJvcmRlcjogIjFweCBzb2xpZCAjZTRlNGU3IiwgcGFkZGluZzogMTIsIGJhY2tncm91bmQ6ICIjZmZmIiB9fT4KICAgICAgICAgICAgICAgICAgICA8SDM+QWRkIHttZW51ID09PSAiY3VzdG9tZXJzX2J1c2luZXNzIiA/ICJCdXNpbmVzcyIgOiAiSW5kaXZpZHVhbCJ9IENsaWVudDwvSDM+CgogICAgICAgICAgICAgICAgICAgIDxkaXYgc3R5bGU9e3sgbWFyZ2luVG9wOiAxMCwgZGlzcGxheTogImdyaWQiLCBnYXA6IDEyIH19PgogICAgICAgICAgICAgICAgICAgICAge21lbnUgPT09ICJjdXN0b21lcnNfYnVzaW5lc3MiID8gKAogICAgICAgICAgICAgICAgICAgICAgICA8PgogICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXY+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IHN0eWxlPXtsYWJlbFN0eWxlfT5CdXNpbmVzcyBuYW1lPC9kaXY+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8SW5wdXQgdmFsdWU9e2RyYWZ0QnVzaW5lc3NOYW1lfSBvbkNoYW5nZT17c2V0RHJhZnRCdXNpbmVzc05hbWV9IHBsYWNlaG9sZGVyPSJFY29mZW5zdGVyIEx0ZCIgLz4KICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj4KICAgICAgICAgICAgICAgICAgICAgICAgPC8+CiAgICAgICAgICAgICAgICAgICAgICApIDogKAogICAgICAgICAgICAgICAgICAgICAgICA8PgogICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXY+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IHN0eWxlPXtsYWJlbFN0eWxlfT5DbGllbnQgbmFtZTwvZGl2PgogICAgICAgICAgICAgICAgICAgICAgICAgICAgPElucHV0IHZhbHVlPXtkcmFmdENsaWVudE5hbWV9IG9uQ2hhbmdlPXtzZXREcmFmdENsaWVudE5hbWV9IHBsYWNlaG9sZGVyPSJOYW1lIiAvPgogICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PgogICAgICAgICAgICAgICAgICAgICAgICA8Lz4KICAgICAgICAgICAgICAgICAgICAgICl9CgogICAgICAgICAgICAgICAgICAgICAgPGRpdiBzdHlsZT17eyBkaXNwbGF5OiAiZ3JpZCIsIGdyaWRUZW1wbGF0ZUNvbHVtbnM6ICIxZnIgMWZyIiwgZ2FwOiAxMiB9fT4KICAgICAgICAgICAgICAgICAgICAgICAgPGRpdj4KICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IHN0eWxlPXtsYWJlbFN0eWxlfT5FbWFpbDwvZGl2PgogICAgICAgICAgICAgICAgICAgICAgICAgIDxJbnB1dCB2YWx1ZT17ZHJhZnRFbWFpbH0gb25DaGFuZ2U9e3NldERyYWZ0RW1haWx9IHBsYWNlaG9sZGVyPSJlbWFpbEBleGFtcGxlLmNvbSIgLz4KICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+CiAgICAgICAgICAgICAgICAgICAgICAgIDxkaXY+CiAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBzdHlsZT17bGFiZWxTdHlsZX0+TW9iaWxlPC9kaXY+CiAgICAgICAgICAgICAgICAgICAgICAgICAgPElucHV0IHZhbHVlPXtkcmFmdE1vYmlsZX0gb25DaGFuZ2U9e3NldERyYWZ0TW9iaWxlfSBwbGFjZWhvbGRlcj0iMDcuLi4iIC8+CiAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PgogICAgICAgICAgICAgICAgICAgICAgPC9kaXY+CgogICAgICAgICAgICAgICAgICAgICAgPGRpdj4KICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBzdHlsZT17bGFiZWxTdHlsZX0+SG9tZTwvZGl2PgogICAgICAgICAgICAgICAgICAgICAgICA8SW5wdXQgdmFsdWU9e2RyYWZ0SG9tZX0gb25DaGFuZ2U9e3NldERyYWZ0SG9tZX0gcGxhY2Vob2xkZXI9IjAxLi4uIiAvPgogICAgICAgICAgICAgICAgICAgICAgPC9kaXY+CgogICAgICAgICAgICAgICAgICAgICAgPGRpdiBzdHlsZT17eyBkaXNwbGF5OiAiZmxleCIsIGdhcDogOCwgbWFyZ2luVG9wOiA2IH19PgogICAgICAgICAgICAgICAgICAgICAgICA8QnV0dG9uIHZhcmlhbnQ9InNlY29uZGFyeSIgb25DbGljaz17KCkgPT4gc2V0U2hvd0FkZENsaWVudChmYWxzZSl9PgogICAgICAgICAgICAgICAgICAgICAgICAgIENhbmNlbAogICAgICAgICAgICAgICAgICAgICAgICA8L0J1dHRvbj4KICAgICAgICAgICAgICAgICAgICAgICAgPEJ1dHRvbiB2YXJpYW50PSJwcmltYXJ5IiBvbkNsaWNrPXsoKSA9PiBjcmVhdGVDbGllbnQobWVudSA9PT0gImN1c3RvbWVyc19idXNpbmVzcyIgPyAiQnVzaW5lc3MiIDogIkluZGl2aWR1YWwiKX0+CiAgICAgICAgICAgICAgICAgICAgICAgICAgQ3JlYXRlIENsaWVudAogICAgICAgICAgICAgICAgICAgICAgICA8L0J1dHRvbj4KICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PgogICAgICAgICAgICAgICAgICAgIDwvZGl2PgogICAgICAgICAgICAgICAgKX0KCiAgICAgICAgICAgICAgICB7LyogQ3VzdG9tZXJzIGxpc3QgKi99CiAgICAgICAgICAgICAgICA8ZGl2IHN0eWxlPXt7IG1hcmdpblRvcDogMTIsIGRpc3BsYXk6ICJncmlkIiwgZ2FwOiAxMiB9fT4KICAgICAgICAgICAgICAgICAge2ZpbHRlcmVkQ2xpZW50cy5sZW5ndGggPT09IDAgJiYgPGRpdiBzdHlsZT17eyBmb250U2l6ZTogMTMsIGNvbG9yOiAiIzcxNzE3YSIgfX0+Tm8gY2xpZW50cyB5ZXQuPC9kaXY+fQoKICAgICAgICAgICAgICAgICAge2ZpbHRlcmVkQ2xpZW50cy5tYXAoKGMpID0+ICgKICAgICAgICAgICAgICAgICAgICA8ZGl2CiAgICAgICAgICAgICAgICAgICAgICBrZXk9e2MuaWR9CiAgICAgICAgICAgICAgICAgICAgICBzdHlsZT17ewogICAgICAgICAgICAgICAgICAgICAgICBib3JkZXJSYWRpdXM6IDE2LAogICAgICAgICAgICAgICAgICAgICAgICBib3JkZXI6ICIxcHggc29saWQgI2U0ZTRlNyIsCiAgICAgICAgICAgICAgICAgICAgICAgIHBhZGRpbmc6IDEyLAogICAgICAgICAgICAgICAgICAgICAgICBiYWNrZ3JvdW5kOiAiI2ZmZiIsCiAgICAgICAgICAgICAgICAgICAgICAgIGRpc3BsYXk6ICJncmlkIiwKICAgICAgICAgICAgICAgICAgICAgICAgZ2FwOiA4LAogICAgICAgICAgICAgICAgICAgICAgfX0KICAgICAgICAgICAgICAgICAgICA+CiAgICAgICAgICAgICAgICAgICAgICA8ZGl2IHN0eWxlPXt7IGRpc3BsYXk6ICJmbGV4IiwgYWxpZ25JdGVtczogImNlbnRlciIsIGp1c3RpZnlDb250ZW50OiAic3BhY2UtYmV0d2VlbiIsIGdhcDogMTAgfX0+CiAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgc3R5bGU9e3sgZGlzcGxheTogImZsZXgiLCBhbGlnbkl0ZW1zOiAiY2VudGVyIiwgZ2FwOiAxMCwgZmxleFdyYXA6ICJ3cmFwIiB9fT4KICAgICAgICAgICAgICAgICAgICAgICAgICA8SDM+e2MuY2xpZW50TmFtZX08L0gzPgogICAgICAgICAgICAgICAgICAgICAgICAgIDxQaWxsPntjLmNsaWVudFJlZn08L1BpbGw+CiAgICAgICAgICAgICAgICAgICAgICAgICAgPFNtYWxsPntjLmVzdGltYXRlcy5sZW5ndGh9IGVzdGltYXRlczwvU21hbGw+CiAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PgoKICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBzdHlsZT17eyBkaXNwbGF5OiAiZmxleCIsIGdhcDogMTAgfX0+CiAgICAgICAgICAgICAgICAgICAgICAgICAgPEJ1dHRvbiB2YXJpYW50PSJwcmltYXJ5IiBvbkNsaWNrPXsoKSA9PiBvcGVuQ2xpZW50KGMpfT4KICAgICAgICAgICAgICAgICAgICAgICAgICAgIE9wZW4KICAgICAgICAgICAgICAgICAgICAgICAgICA8L0J1dHRvbj4KICAgICAgICAgICAgICAgICAgICAgICAgICA8QnV0dG9uIHZhcmlhbnQ9InNlY29uZGFyeSIgb25DbGljaz17KCkgPT4gY3JlYXRlRXN0aW1hdGVGb3JDbGllbnQoYyl9PgogICAgICAgICAgICAgICAgICAgICAgICAgICAgTmV3IEVzdGltYXRlCiAgICAgICAgICAgICAgICAgICAgICAgICAgPC9CdXR0b24+CiAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PgogICAgICAgICAgICAgICAgICAgICAgPC9kaXY+CgogICAgICAgICAgICAgICAgICAgICAgPGRpdiBzdHlsZT17eyBmb250U2l6ZTogMTIsIGNvbG9yOiAiIzcxNzE3YSIgfX0+CiAgICAgICAgICAgICAgICAgICAgICAgIHtjLnByb2plY3ROYW1lIHx8ICJObyBwcm9qZWN0IG5hbWUifSDigKIge2MucHJvamVjdEFkZHJlc3MgPyBjLnByb2plY3RBZGRyZXNzLnNwbGl0KCJcbiIpWzBdIDogIk5vIHByb2plY3QgYWRkcmVzcyJ9CiAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj4KICAgICAgICAgICAgICAgICAgICA8L2Rpdj4KICAgICAgICAgICAgICAgICAgKSl9CiAgICAgICAgICAgICAgICA8L2Rpdj4KICAgICAgICAgICAgICA8L0NhcmQ+CiAgICAgICAgICAgICl9CgogICAgICAgICAgICB7LyogRVNUSU1BVEUgUElDS0VSICovfQogICAgICAgICAgICB7dmlldyA9PT0gImVzdGltYXRlX3BpY2tlciIgJiYgcGlja2VyQ2xpZW50ICYmICgKICAgICAgICAgICAgICA8Q2FyZCBzdHlsZT17eyBtaW5IZWlnaHQ6IDUyMCB9fT4KICAgICAgICAgICAgICAgIDxkaXYgc3R5bGU9e3sgZGlzcGxheTogImZsZXgiLCBhbGlnbkl0ZW1zOiAiZmxleC1zdGFydCIsIGp1c3RpZnlDb250ZW50OiAic3BhY2UtYmV0d2VlbiIsIGdhcDogMTIgfX0+CiAgICAgICAgICAgICAgICAgIDxkaXY+CiAgICAgICAgICAgICAgICAgICAgPEgyPkNob29zZSBhbiBlc3RpbWF0ZTwvSDI+CiAgICAgICAgICAgICAgICAgICAgPFNtYWxsPntwaWNrZXJDbGllbnQuY2xpZW50TmFtZX0g4oCiIHtwaWNrZXJDbGllbnQuY2xpZW50UmVmfTwvU21hbGw+CiAgICAgICAgICAgICAgICAgIDwvZGl2PgoKICAgICAgICAgICAgICAgICAgPGRpdiBzdHlsZT17eyBkaXNwbGF5OiAiZmxleCIsIGdhcDogMTAgfX0+CiAgICAgICAgICAgICAgICAgICAgPEJ1dHRvbiB2YXJpYW50PSJzZWNvbmRhcnkiIG9uQ2xpY2s9eygpID0+IHNldFZpZXcoImN1c3RvbWVycyIpfT5CYWNrPC9CdXR0b24+CiAgICAgICAgICAgICAgICAgICAgPEJ1dHRvbiB2YXJpYW50PSJwcmltYXJ5IiBvbkNsaWNrPXsoKSA9PiBjcmVhdGVFc3RpbWF0ZUZvckNsaWVudChwaWNrZXJDbGllbnQpfT5OZXcgRXN0aW1hdGU8L0J1dHRvbj4KICAgICAgICAgICAgICAgICAgPC9kaXY+CiAgICAgICAgICAgICAgICA8L2Rpdj4KCiAgICAgICAgICAgICAgICA8ZGl2IHN0eWxlPXt7IG1hcmdpblRvcDogMTQsIGRpc3BsYXk6ICJncmlkIiwgZ2FwOiAxMCB9fT4KICAgICAgICAgICAgICAgICAge3BpY2tlckNsaWVudC5lc3RpbWF0ZXMubWFwKChlKSA9PiAoCiAgICAgICAgICAgICAgICAgICAgPGRpdgogICAgICAgICAgICAgICAgICAgICAga2V5PXtlLmlkfQogICAgICAgICAgICAgICAgICAgICAgc3R5bGU9e3sKICAgICAgICAgICAgICAgICAgICAgICAgYm9yZGVyUmFkaXVzOiAxNCwKICAgICAgICAgICAgICAgICAgICAgICAgYm9yZGVyOiAiMXB4IHNvbGlkICNlNGU0ZTciLAogICAgICAgICAgICAgICAgICAgICAgICBwYWRkaW5nOiAxMCwKICAgICAgICAgICAgICAgICAgICAgICAgYmFja2dyb3VuZDogIiNmZmYiLAogICAgICAgICAgICAgICAgICAgICAgICBkaXNwbGF5OiAiZmxleCIsCiAgICAgICAgICAgICAgICAgICAgICAgIGp1c3RpZnlDb250ZW50OiAic3BhY2UtYmV0d2VlbiIsCiAgICAgICAgICAgICAgICAgICAgICAgIGFsaWduSXRlbXM6ICJjZW50ZXIiLAogICAgICAgICAgICAgICAgICAgICAgICBnYXA6IDEwLAogICAgICAgICAgICAgICAgICAgICAgfX0KICAgICAgICAgICAgICAgICAgICA+CiAgICAgICAgICAgICAgICAgICAgICA8ZGl2IHN0eWxlPXt7IGRpc3BsYXk6ICJmbGV4IiwgYWxpZ25JdGVtczogImNlbnRlciIsIGdhcDogOCwgZmxleFdyYXA6ICJ3cmFwIiB9fT4KICAgICAgICAgICAgICAgICAgICAgICAgPFBpbGw+e2UuZXN0aW1hdGVSZWZ9PC9QaWxsPgogICAgICAgICAgICAgICAgICAgICAgICA8U21hbGw+e2Uuc3RhdHVzfTwvU21hbGw+CiAgICAgICAgICAgICAgICAgICAgICAgIDxTbWFsbD57ZS5wb3NpdGlvbnMubGVuZ3RofSBwb3NpdGlvbnM8L1NtYWxsPgogICAgICAgICAgICAgICAgICAgICAgPC9kaXY+CgogICAgICAgICAgICAgICAgICAgICAgPEJ1dHRvbiB2YXJpYW50PSJwcmltYXJ5IiBvbkNsaWNrPXsoKSA9PiBvcGVuRXN0aW1hdGVGcm9tUGlja2VyKGUuaWQpfT5PcGVuPC9CdXR0b24+CiAgICAgICAgICAgICAgICAgICAgPC9kaXY+CiAgICAgICAgICAgICAgICAgICkpfQogICAgICAgICAgICAgICAgPC9kaXY+CiAgICAgICAgICAgICAgPC9DYXJkPgogICAgICAgICAgICApfQoKICAgICAgICAgICAgey8qIEVTVElNQVRFIERFRkFVTFRTIChTdXBwbGllciAmIFByb2R1Y3QgRGVmYXVsdHMgc2NyZWVuKSAqL30KICAgICAgICAgICAge3ZpZXcgPT09ICJlc3RpbWF0ZV9kZWZhdWx0cyIgJiYgc2VsZWN0ZWRDbGllbnQgJiYgc2VsZWN0ZWRFc3RpbWF0ZSAmJiAoCiAgICAgICAgICAgICAgPENhcmQgc3R5bGU9e3sgbWluSGVpZ2h0OiA1MjAgfX0+CiAgICAgICAgICAgICAgICA8ZGl2IHN0eWxlPXt7IGRpc3BsYXk6ICJmbGV4IiwgYWxpZ25JdGVtczogImZsZXgtc3RhcnQiLCBqdXN0aWZ5Q29udGVudDogInNwYWNlLWJldHdlZW4iLCBnYXA6IDEyIH19PgogICAgICAgICAgICAgICAgICA8ZGl2PgogICAgICAgICAgICAgICAgICAgIDxIMj5TdXBwbGllciAmIFByb2R1Y3QgRGVmYXVsdHM8L0gyPgogICAgICAgICAgICAgICAgICAgIDxkaXYgc3R5bGU9e3sgbWFyZ2luVG9wOiA4LCBkaXNwbGF5OiAiZmxleCIsIGdhcDogOCwgZmxleFdyYXA6ICJ3cmFwIiwgYWxpZ25JdGVtczogImNlbnRlciIgfX0+CiAgICAgICAgICAgICAgICAgICAgICA8UGlsbD57c2VsZWN0ZWRDbGllbnQuY2xpZW50UmVmfTwvUGlsbD4KICAgICAgICAgICAgICAgICAgICAgIDxQaWxsPntzZWxlY3RlZEVzdGltYXRlLmVzdGltYXRlUmVmfTwvUGlsbD4KICAgICAgICAgICAgICAgICAgICAgIDxTbWFsbD57c2VsZWN0ZWRDbGllbnQuY2xpZW50TmFtZX08L1NtYWxsPgogICAgICAgICAgICAgICAgICAgIDwvZGl2PgogICAgICAgICAgICAgICAgICAgIDxTbWFsbD5TZXQgZXN0aW1hdGUtbGV2ZWwgZGVmYXVsdHMgaGVyZS4gQWRkIFBvc2l0aW9uIHdpbGwgdXNlIHRoZXNlIHdoZW4g4oCcVXNlIGVzdGltYXRlIGRlZmF1bHRz4oCdIGlzIG9uLjwvU21hbGw+CiAgICAgICAgICAgICAgICAgIDwvZGl2PgoKICAgICAgICAgICAgICAgICAgPGRpdiBzdHlsZT17eyBkaXNwbGF5OiAiZmxleCIsIGdhcDogMTAgfX0+CiAgICAgICAgICAgICAgICAgICAgPEJ1dHRvbiB2YXJpYW50PSJzZWNvbmRhcnkiIG9uQ2xpY2s9eygpID0+IHNldFZpZXcoImN1c3RvbWVycyIpfT5CYWNrPC9CdXR0b24+CiAgICAgICAgICAgICAgICAgICAgPEJ1dHRvbiB2YXJpYW50PSJwcmltYXJ5IiBvbkNsaWNrPXsoKSA9PiBzZXRWaWV3KCJlc3RpbWF0ZV93b3Jrc3BhY2UiKX0+Q29udGludWU8L0J1dHRvbj4KICAgICAgICAgICAgICAgICAgPC9kaXY+CiAgICAgICAgICAgICAgICA8L2Rpdj4KCiAgICAgICAgICAgICAgICA8ZGl2IHN0eWxlPXt7IG1hcmdpblRvcDogMTQgfX0+CiAgICAgICAgICAgICAgICAgIDxEZWZhdWx0c0VkaXRvcgogICAgICAgICAgICAgICAgICAgIHRpdGxlPSJFc3RpbWF0ZSBEZWZhdWx0cyIKICAgICAgICAgICAgICAgICAgICBwcm9kdWN0VHlwZT17c2VsZWN0ZWRFc3RpbWF0ZS5kZWZhdWx0cy5wcm9kdWN0VHlwZX0KICAgICAgICAgICAgICAgICAgICB2YWx1ZT17c2VsZWN0ZWRFc3RpbWF0ZS5kZWZhdWx0c30KICAgICAgICAgICAgICAgICAgICBvbkNoYW5nZT17c2V0RXN0aW1hdGVEZWZhdWx0c30KICAgICAgICAgICAgICAgICAgICBzaG93RG9vck9wdGlvbnM9e3RydWV9CiAgICAgICAgICAgICAgICAgIC8+CiAgICAgICAgICAgICAgICA8L2Rpdj4KICAgICAgICAgICAgICA8L0NhcmQ+CiAgICAgICAgICAgICl9CgogICAgICAgICAgICB7LyogRVNUSU1BVEUgV09SS1NQQUNFICovfQogICAgICAgICAgICB7dmlldyA9PT0gImVzdGltYXRlX3dvcmtzcGFjZSIgJiYgc2VsZWN0ZWRDbGllbnQgJiYgc2VsZWN0ZWRFc3RpbWF0ZSAmJiAoCiAgICAgICAgICAgICAgPENhcmQgc3R5bGU9e3sgbWluSGVpZ2h0OiA1MjAsIGRpc3BsYXk6ICJmbGV4IiwgZmxleERpcmVjdGlvbjogImNvbHVtbiIgfX0+CiAgICAgICAgICAgICAgICA8ZGl2IHN0eWxlPXt7IGRpc3BsYXk6ICJmbGV4IiwgYWxpZ25JdGVtczogImZsZXgtc3RhcnQiLCBqdXN0aWZ5Q29udGVudDogInNwYWNlLWJldHdlZW4iLCBnYXA6IDEyIH19PgogICAgICAgICAgICAgICAgICA8ZGl2PgogICAgICAgICAgICAgICAgICAgIDxIMj5Fc3RpbWF0ZTwvSDI+CiAgICAgICAgICAgICAgICAgICAgPGRpdiBzdHlsZT17eyBtYXJnaW5Ub3A6IDgsIGRpc3BsYXk6ICJmbGV4IiwgZ2FwOiA4LCBmbGV4V3JhcDogIndyYXAiLCBhbGlnbkl0ZW1zOiAiY2VudGVyIiB9fT4KICAgICAgICAgICAgICAgICAgICAgIDxQaWxsPntzZWxlY3RlZENsaWVudC5jbGllbnRSZWZ9PC9QaWxsPgogICAgICAgICAgICAgICAgICAgICAgPFBpbGw+e3NlbGVjdGVkRXN0aW1hdGUuZXN0aW1hdGVSZWZ9PC9QaWxsPgogICAgICAgICAgICAgICAgICAgICAgPFNtYWxsPntzZWxlY3RlZENsaWVudC5jbGllbnROYW1lfTwvU21hbGw+CiAgICAgICAgICAgICAgICAgICAgPC9kaXY+CiAgICAgICAgICAgICAgICAgICAgPFNtYWxsPlN1cHBsaWVyL1Byb2R1Y3QgRGVmYXVsdHMgYXJlIHNldCBzZXBhcmF0ZWx5LiBBZGQgUG9zaXRpb24gc3RhcnRzIGF0IFBvc2l0aW9uIOKGkiBEaW1lbnNpb25zIOKGkiBDb25maWd1cmF0aW9uLjwvU21hbGw+CiAgICAgICAgICAgICAgICAgIDwvZGl2PgoKICAgICAgICAgICAgICAgICAgPGRpdiBzdHlsZT17eyBkaXNwbGF5OiAiZmxleCIsIGdhcDogMTAgfX0+CiAgICAgICAgICAgICAgICAgICAgPEJ1dHRvbiB2YXJpYW50PSJzZWNvbmRhcnkiIG9uQ2xpY2s9eygpID0+IHNldFZpZXcoImVzdGltYXRlX2RlZmF1bHRzIil9PlN1cHBsaWVyICYgUHJvZHVjdCBEZWZhdWx0czwvQnV0dG9uPgogICAgICAgICAgICAgICAgICAgIDxCdXR0b24gdmFyaWFudD0ic2Vjb25kYXJ5IiBvbkNsaWNrPXsoKSA9PiBzZXRWaWV3KCJjdXN0b21lcnMiKX0+QmFjazwvQnV0dG9uPgogICAgICAgICAgICAgICAgICA8L2Rpdj4KICAgICAgICAgICAgICAgIDwvZGl2PgoKICAgICAgICAgICAgICAgIDxkaXYgc3R5bGU9e3sgbWFyZ2luVG9wOiAxNiB9fT4KICAgICAgICAgICAgICAgICAgPEJ1dHRvbiB2YXJpYW50PSJwcmltYXJ5IiBvbkNsaWNrPXtzdGFydEFkZFBvc2l0aW9ufSBzdHlsZT17eyB3aWR0aDogIjEwMCUiIH19PgogICAgICAgICAgICAgICAgICAgIEFkZCBQb3NpdGlvbgogICAgICAgICAgICAgICAgICA8L0J1dHRvbj4KICAgICAgICAgICAgICAgIDwvZGl2PgoKICAgICAgICAgICAgICAgIDxkaXYgc3R5bGU9e3sgbWFyZ2luVG9wOiAxNiwgYm9yZGVyVG9wOiAiMXB4IHNvbGlkICNlNGU0ZTciLCBwYWRkaW5nVG9wOiAxMiwgZmxleDogMSB9fT4KICAgICAgICAgICAgICAgICAgPEgzPlBvc2l0aW9uczwvSDM+CiAgICAgICAgICAgICAgICAgIDxTbWFsbD5Qb3NpdGlvbnMgYWRkZWQgdG8gdGhpcyBlc3RpbWF0ZSBhcHBlYXIgYmVsb3cuPC9TbWFsbD4KCiAgICAgICAgICAgICAgICAgIDxkaXYgc3R5bGU9e3sgbWFyZ2luVG9wOiAxMCwgZGlzcGxheTogImdyaWQiLCBnYXA6IDEwIH19PgogICAgICAgICAgICAgICAgICAgIHtzZWxlY3RlZEVzdGltYXRlLnBvc2l0aW9ucy5sZW5ndGggPT09IDAgJiYgPGRpdiBzdHlsZT17eyBmb250U2l6ZTogMTMsIGNvbG9yOiAiIzcxNzE3YSIgfX0+Tm8gcG9zaXRpb25zIHlldC48L2Rpdj59CgogICAgICAgICAgICAgICAgICAgIHtzZWxlY3RlZEVzdGltYXRlLnBvc2l0aW9ucy5tYXAoKHApID0+ICgKICAgICAgICAgICAgICAgICAgICAgIDxkaXYKICAgICAgICAgICAgICAgICAgICAgICAga2V5PXtwLmlkfQogICAgICAgICAgICAgICAgICAgICAgICBzdHlsZT17ewogICAgICAgICAgICAgICAgICAgICAgICAgIGJvcmRlclJhZGl1czogMTQsCiAgICAgICAgICAgICAgICAgICAgICAgICAgYm9yZGVyOiAiMXB4IHNvbGlkICNlNGU0ZTciLAogICAgICAgICAgICAgICAgICAgICAgICAgIHBhZGRpbmc6IDEwLAogICAgICAgICAgICAgICAgICAgICAgICAgIGJhY2tncm91bmQ6ICIjZmZmIiwKICAgICAgICAgICAgICAgICAgICAgICAgfX0KICAgICAgICAgICAgICAgICAgICAgID4KICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBzdHlsZT17eyBkaXNwbGF5OiAiZmxleCIsIGFsaWduSXRlbXM6ICJjZW50ZXIiLCBqdXN0aWZ5Q29udGVudDogInNwYWNlLWJldHdlZW4iLCBnYXA6IDEwIH19PgogICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgc3R5bGU9e3sgZm9udFdlaWdodDogOTAwLCBmb250U2l6ZTogMTMgfX0+e3AucG9zaXRpb25SZWZ9PC9kaXY+CiAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBzdHlsZT17eyBmb250U2l6ZTogMTIsIGNvbG9yOiAiIzcxNzE3YSIgfX0+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBRdHkge3AucXR5fSDigKIge3Aud2lkdGhNbX3Dl3twLmhlaWdodE1tfSDigKIge3AuZmllbGRzWH3Dl3twLmZpZWxkc1l9CiAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+CiAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PgogICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IHN0eWxlPXt7IG1hcmdpblRvcDogNCwgZm9udFNpemU6IDEyLCBjb2xvcjogIiM3MTcxN2EiIH19PgogICAgICAgICAgICAgICAgICAgICAgICAgIHtwLnJvb21OYW1lIHx8ICLigJQifSDigKIge3AucG9zaXRpb25UeXBlfSDigKIge3AudXNlRXN0aW1hdGVEZWZhdWx0cyA/ICJVc2luZyBlc3RpbWF0ZSBkZWZhdWx0cyIgOiAiT3ZlcnJpZGVzIn0KICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+CiAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj4KICAgICAgICAgICAgICAgICAgICApKX0KICAgICAgICAgICAgICAgICAgPC9kaXY+CiAgICAgICAgICAgICAgICA8L2Rpdj4KCiAgICAgICAgICAgICAgICB7LyogUG9zaXRpb24gd2l6YXJkICovfQogICAgICAgICAgICAgICAge3Nob3dQb3NpdGlvbldpemFyZCAmJiBzZWxlY3RlZEVzdGltYXRlICYmICgKICAgICAgICAgICAgICAgICAgPGRpdiBzdHlsZT17eyBtYXJnaW5Ub3A6IDE0LCBib3JkZXJSYWRpdXM6IDE0LCBib3JkZXI6ICIxcHggc29saWQgI2U0ZTRlNyIsIHBhZGRpbmc6IDEyLCBiYWNrZ3JvdW5kOiAiI2ZmZiIgfX0+CiAgICAgICAgICAgICAgICAgICAgPGRpdiBzdHlsZT17eyBkaXNwbGF5OiAiZmxleCIsIGFsaWduSXRlbXM6ICJjZW50ZXIiLCBqdXN0aWZ5Q29udGVudDogInNwYWNlLWJldHdlZW4iLCBnYXA6IDEwIH19PgogICAgICAgICAgICAgICAgICAgICAgPEgzPkFkZCBQb3NpdGlvbjwvSDM+CiAgICAgICAgICAgICAgICAgICAgICA8QnV0dG9uIHZhcmlhbnQ9InNlY29uZGFyeSIgb25DbGljaz17KCkgPT4gc2V0U2hvd1Bvc2l0aW9uV2l6YXJkKGZhbHNlKX0gc3R5bGU9e3sgYm9yZGVyUmFkaXVzOiAxNCwgcGFkZGluZzogIjhweCAxMHB4IiB9fT4KICAgICAgICAgICAgICAgICAgICAgICAgQ2xvc2UKICAgICAgICAgICAgICAgICAgICAgIDwvQnV0dG9uPgogICAgICAgICAgICAgICAgICAgIDwvZGl2PgoKICAgICAgICAgICAgICAgICAgICA8ZGl2IHN0eWxlPXt7IG1hcmdpblRvcDogMTAsIGRpc3BsYXk6ICJmbGV4IiwgZ2FwOiA4LCBmbGV4V3JhcDogIndyYXAiIH19PgogICAgICAgICAgICAgICAgICAgICAge1sxLCAyLCAzXS5tYXAoKHMpID0+ICgKICAgICAgICAgICAgICAgICAgICAgICAgPGRpdgogICAgICAgICAgICAgICAgICAgICAgICAgIGtleT17c30KICAgICAgICAgICAgICAgICAgICAgICAgICBzdHlsZT17ewogICAgICAgICAgICAgICAgICAgICAgICAgICAgYm9yZGVyUmFkaXVzOiAxNCwKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJvcmRlcjogIjFweCBzb2xpZCAiICsgKHBvc1N0ZXAgPT09IHMgPyAiIzE4MTgxYiIgOiAiI2U0ZTRlNyIpLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgYmFja2dyb3VuZDogcG9zU3RlcCA9PT0gcyA/ICIjMTgxODFiIiA6ICIjZmZmIiwKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbG9yOiBwb3NTdGVwID09PSBzID8gIiNmZmYiIDogIiMzZjNmNDYiLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgcGFkZGluZzogIjhweCAxMHB4IiwKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZvbnRTaXplOiAxNCwKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZvbnRXZWlnaHQ6IDgwMCwKICAgICAgICAgICAgICAgICAgICAgICAgICB9fQogICAgICAgICAgICAgICAgICAgICAgICA+CiAgICAgICAgICAgICAgICAgICAgICAgICAge3N9LiB7c3RlcExhYmVsKHMgYXMgYW55KX0KICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+CiAgICAgICAgICAgICAgICAgICAgICApKX0KICAgICAgICAgICAgICAgICAgICA8L2Rpdj4KCiAgICAgICAgICAgICAgICAgICAgPGRpdiBzdHlsZT17eyBtYXJnaW5Ub3A6IDEyLCBib3JkZXJSYWRpdXM6IDE0LCBib3JkZXI6ICIxcHggc29saWQgI2U0ZTRlNyIsIHBhZGRpbmc6IDEyIH19PgogICAgICAgICAgICAgICAgICAgICAge3Bvc1N0ZXAgPT09IDEgJiYgKAogICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IHN0eWxlPXt7IGRpc3BsYXk6ICJncmlkIiwgZ2FwOiAxMiB9fT4KICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IHN0eWxlPXt7IGRpc3BsYXk6ICJncmlkIiwgZ3JpZFRlbXBsYXRlQ29sdW1uczogIjFmciAxZnIiLCBnYXA6IDEyIH19PgogICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdj4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBzdHlsZT17bGFiZWxTdHlsZX0+UG9zaXRpb24gcmVmZXJlbmNlPC9kaXY+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxJbnB1dCB2YWx1ZT17cG9zRHJhZnQucG9zaXRpb25SZWZ9IG9uQ2hhbmdlPXsodikgPT4gc2V0UG9zRHJhZnQoKHApID0+ICh7IC4uLnAsIHBvc2l0aW9uUmVmOiB2IH0pKX0gLz4KICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PgogICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdj4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBzdHlsZT17bGFiZWxTdHlsZX0+UXVhbnRpdHk8L2Rpdj4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPElucHV0CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdHlwZT0ibnVtYmVyIgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhbHVlPXtTdHJpbmcocG9zRHJhZnQucXR5KX0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvbkNoYW5nZT17KHYpID0+IHNldFBvc0RyYWZ0KChwKSA9PiAoeyAuLi5wLCBxdHk6IE1hdGgubWF4KDEsIE1hdGgubWluKDk5OSwgTnVtYmVyKHYgfHwgMSkpKSB9KSl9CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj4KICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj4KCiAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdj4KICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgc3R5bGU9e2xhYmVsU3R5bGV9PlJvb20gbmFtZTwvZGl2PgogICAgICAgICAgICAgICAgICAgICAgICAgICAgPElucHV0IHZhbHVlPXtwb3NEcmFmdC5yb29tTmFtZX0gb25DaGFuZ2U9eyh2KSA9PiBzZXRQb3NEcmFmdCgocCkgPT4gKHsgLi4ucCwgcm9vbU5hbWU6IHYgfSkpfSAvPgogICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PgoKICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2PgogICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBzdHlsZT17bGFiZWxTdHlsZX0+UG9zaXRpb24gdHlwZTwvZGl2PgogICAgICAgICAgICAgICAgICAgICAgICAgICAgPHNlbGVjdAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YWx1ZT17cG9zRHJhZnQucG9zaXRpb25UeXBlfQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvbkNoYW5nZT17KGUpID0+IHNldFBvc0RyYWZ0KChwKSA9PiAoeyAuLi5wLCBwb3NpdGlvblR5cGU6IGUudGFyZ2V0LnZhbHVlIGFzICJXaW5kb3ciIHwgIkRvb3IiIH0pKX0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc3R5bGU9e3sgd2lkdGg6ICIxMDAlIiwgYm9yZGVyUmFkaXVzOiAxMiwgYm9yZGVyOiAiMXB4IHNvbGlkICNlNGU0ZTciLCBwYWRkaW5nOiAiMTBweCAxMnB4IiwgZm9udFNpemU6IDE0IH19CiAgICAgICAgICAgICAgICAgICAgICAgICAgICA+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxvcHRpb24gdmFsdWU9IldpbmRvdyI+V2luZG93PC9vcHRpb24+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxvcHRpb24gdmFsdWU9IkRvb3IiPkRvb3I8L29wdGlvbj4KICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvc2VsZWN0PgogICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PgogICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj4KICAgICAgICAgICAgICAgICAgICAgICl9CgogICAgICAgICAgICAgICAgICAgICAge3Bvc1N0ZXAgPT09IDIgJiYgKAogICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IHN0eWxlPXt7IGRpc3BsYXk6ICJncmlkIiwgZ2FwOiAxMiB9fT4KICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IHN0eWxlPXt7IGRpc3BsYXk6ICJncmlkIiwgZ3JpZFRlbXBsYXRlQ29sdW1uczogIjFmciAxZnIiLCBnYXA6IDEyIH19PgogICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdj4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBzdHlsZT17bGFiZWxTdHlsZX0+VG90YWwgd2lkdGggKG1tKTwvZGl2PgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8SW5wdXQgdHlwZT0ibnVtYmVyIiB2YWx1ZT17U3RyaW5nKHBvc0RyYWZ0LndpZHRoTW0pfSBvbkNoYW5nZT17KHYpID0+IHNldFBvc0RyYWZ0KChwKSA9PiAoeyAuLi5wLCB3aWR0aE1tOiBOdW1iZXIodiB8fCBwLndpZHRoTW0pIH0pKX0gLz4KICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PgogICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdj4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBzdHlsZT17bGFiZWxTdHlsZX0+VG90YWwgaGVpZ2h0IChtbSk8L2Rpdj4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPElucHV0IHR5cGU9Im51bWJlciIgdmFsdWU9e1N0cmluZyhwb3NEcmFmdC5oZWlnaHRNbSl9IG9uQ2hhbmdlPXsodikgPT4gc2V0UG9zRHJhZnQoKHApID0+ICh7IC4uLnAsIGhlaWdodE1tOiBOdW1iZXIodiB8fCBwLmhlaWdodE1tKSB9KSl9IC8+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj4KICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj4KCiAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBzdHlsZT17eyBkaXNwbGF5OiAiZ3JpZCIsIGdyaWRUZW1wbGF0ZUNvbHVtbnM6ICIxZnIgMWZyIiwgZ2FwOiAxMiB9fT4KICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXY+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgc3R5bGU9e2xhYmVsU3R5bGV9PkZpZWxkcyAod2lkdGgpPC9kaXY+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxJbnB1dAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHR5cGU9Im51bWJlciIKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YWx1ZT17U3RyaW5nKHBvc0RyYWZ0LmZpZWxkc1gpfQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9uQ2hhbmdlPXsodikgPT4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldFBvc0RyYWZ0KChwKSA9PiB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGZ4ID0gTWF0aC5tYXgoMSwgTWF0aC5taW4oMTYsIE51bWJlcih2IHx8IDEpKSk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLi4ucCwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBmaWVsZHNYOiBmeCwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb2xXaWR0aHNNbTogc2NhbGVTcGxpdHNUb1RvdGFsKHAud2lkdGhNbSwgcC5jb2xXaWR0aHNNbSA/PyBbXSwgZngpLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNlbGxJbnNlcnRpb25zOiBub3JtYWxpemVDZWxsSW5zZXJ0aW9ucyhmeCwgcC5maWVsZHNZLCBwLmNlbGxJbnNlcnRpb25zLCBwLmluc2VydGlvbiksCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH07CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLz4KICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PgogICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdj4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBzdHlsZT17bGFiZWxTdHlsZX0+RmllbGRzIChoZWlnaHQpPC9kaXY+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxJbnB1dAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHR5cGU9Im51bWJlciIKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YWx1ZT17U3RyaW5nKHBvc0RyYWZ0LmZpZWxkc1kpfQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9uQ2hhbmdlPXsodikgPT4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldFBvc0RyYWZ0KChwKSA9PiB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGZ5ID0gTWF0aC5tYXgoMSwgTWF0aC5taW4oMTYsIE51bWJlcih2IHx8IDEpKSk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLi4ucCwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBmaWVsZHNZOiBmeSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByb3dIZWlnaHRzTW06IHNjYWxlU3BsaXRzVG9Ub3RhbChwLmhlaWdodE1tLCBwLnJvd0hlaWdodHNNbSA/PyBbXSwgZnkpLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNlbGxJbnNlcnRpb25zOiBub3JtYWxpemVDZWxsSW5zZXJ0aW9ucyhwLmZpZWxkc1gsIGZ5LCBwLmNlbGxJbnNlcnRpb25zLCBwLmluc2VydGlvbiksCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH07CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLz4KICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PgogICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PgogICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj4KICAgICAgICAgICAgICAgICAgICAgICl9CgogICAgICAgICAgICAgICAgICAgICAge3Bvc1N0ZXAgPT09IDMgJiYgKAogICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IHN0eWxlPXt7IGRpc3BsYXk6ICJncmlkIiwgZ3JpZFRlbXBsYXRlQ29sdW1uczogIjQyMHB4IDFmciIsIGdhcDogMTYgfX0+CiAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBzdHlsZT17eyBkaXNwbGF5OiAiZ3JpZCIsIGdhcDogMTIgfX0+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IHN0eWxlPXt7IGJvcmRlclJhZGl1czogMTQsIGJvcmRlcjogIjFweCBzb2xpZCAjZTRlNGU3IiwgcGFkZGluZzogMTIgfX0+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxIMz5JbnNlcnRpb248L0gzPgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IHN0eWxlPXt7IG1hcmdpblRvcDogOCB9fT4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IHN0eWxlPXt7IGRpc3BsYXk6ICJmbGV4IiwgYWxpZ25JdGVtczogImNlbnRlciIsIGp1c3RpZnlDb250ZW50OiAic3BhY2UtYmV0d2VlbiIsIGdhcDogMTAgfX0+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IHN0eWxlPXt7IGZvbnRTaXplOiAxMiwgY29sb3I6ICIjNzE3MTdhIiB9fT4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgU2VsZWN0ZWQgZmllbGQ6ICN7ZHJhZnRTZWxlY3RlZENlbGwucm93ICogcG9zRHJhZnQuZmllbGRzWCArIGRyYWZ0U2VsZWN0ZWRDZWxsLmNvbCArIDF9CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgc3R5bGU9e3sgZGlzcGxheTogImZsZXgiLCBnYXA6IDgsIGFsaWduSXRlbXM6ICJjZW50ZXIiIH19PgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8c2VsZWN0CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFsdWU9e29wZW5pbmdTdGR9CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb25DaGFuZ2U9eyhlKSA9PiBzZXRPcGVuaW5nU3RkKGUudGFyZ2V0LnZhbHVlIGFzIGFueSl9CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc3R5bGU9e3sgYm9yZGVyUmFkaXVzOiAxMCwgYm9yZGVyOiAiMXB4IHNvbGlkICNlNGU0ZTciLCBwYWRkaW5nOiAiNnB4IDEwcHgiLCBmb250U2l6ZTogMTIgfX0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aXRsZT0iT3BlbmluZyBjb252ZW50aW9uIgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPG9wdGlvbiB2YWx1ZT0iRElOIj5ESU48L29wdGlvbj4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8b3B0aW9uIHZhbHVlPSJVSyI+VUs8L29wdGlvbj4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9zZWxlY3Q+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxzZWxlY3QKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YWx1ZT17cHJldmlld1ZpZXd9CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb25DaGFuZ2U9eyhlKSA9PiBzZXRQcmV2aWV3VmlldyhlLnRhcmdldC52YWx1ZSBhcyBhbnkpfQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN0eWxlPXt7IGJvcmRlclJhZGl1czogMTAsIGJvcmRlcjogIjFweCBzb2xpZCAjZTRlNGU3IiwgcGFkZGluZzogIjZweCAxMHB4IiwgZm9udFNpemU6IDEyIH19CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGl0bGU9IlZpZXciCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgID4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8b3B0aW9uIHZhbHVlPSJJbnNpZGUiPkluc2lkZTwvb3B0aW9uPgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxvcHRpb24gdmFsdWU9Ik91dHNpZGUiPk91dHNpZGU8L29wdGlvbj4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9zZWxlY3Q+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj4KCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBzdHlsZT17eyBtYXJnaW5Ub3A6IDggfX0+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8c2VsZWN0CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhbHVlPXtwb3NEcmFmdC5jZWxsSW5zZXJ0aW9uc1trZXlGb3JDZWxsKGRyYWZ0U2VsZWN0ZWRDZWxsLmNvbCwgZHJhZnRTZWxlY3RlZENlbGwucm93KV0gPz8gcG9zRHJhZnQuaW5zZXJ0aW9ufQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvbkNoYW5nZT17KGUpID0+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0UG9zRHJhZnQoKHApID0+ICh7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAuLi5wLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2VsbEluc2VydGlvbnM6IHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLi4ucC5jZWxsSW5zZXJ0aW9ucywKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgW2tleUZvckNlbGwoZHJhZnRTZWxlY3RlZENlbGwuY29sLCBkcmFmdFNlbGVjdGVkQ2VsbC5yb3cpXTogZS50YXJnZXQudmFsdWUsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN0eWxlPXt7IHdpZHRoOiAiMTAwJSIsIGJvcmRlclJhZGl1czogMTIsIGJvcmRlcjogIjFweCBzb2xpZCAjZTRlNGU3IiwgcGFkZGluZzogIjEwcHggMTJweCIsIGZvbnRTaXplOiAxNCB9fQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8b3B0aW9uPkZpeGVkPC9vcHRpb24+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxvcHRpb24+VHVybjwvb3B0aW9uPgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8b3B0aW9uPlRpbHQ8L29wdGlvbj4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPG9wdGlvbj5UaWx0ICYgVHVybjwvb3B0aW9uPgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8b3B0aW9uPlRvcCBIdW5nPC9vcHRpb24+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxvcHRpb24+U2lkZSBIdW5nPC9vcHRpb24+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxvcHRpb24+UmV2ZXJzaWJsZTwvb3B0aW9uPgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9zZWxlY3Q+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PgogICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+CgogICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBzdHlsZT17eyBib3JkZXJSYWRpdXM6IDE0LCBib3JkZXI6ICIxcHggc29saWQgI2U0ZTRlNyIsIHBhZGRpbmc6IDEyIH19PgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8SDM+VXNlIGVzdGltYXRlIGRlZmF1bHRzPC9IMz4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBzdHlsZT17eyBtYXJnaW5Ub3A6IDEwLCBkaXNwbGF5OiAiZ3JpZCIsIGdhcDogMTAgfX0+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGxhYmVsIHN0eWxlPXt7IGRpc3BsYXk6ICJmbGV4IiwgYWxpZ25JdGVtczogImNlbnRlciIsIGdhcDogOCwgZm9udFNpemU6IDE0LCBmb250V2VpZ2h0OiA3MDAgfX0+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8aW5wdXQKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdHlwZT0iY2hlY2tib3giCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNoZWNrZWQ9e3Bvc0RyYWZ0LnVzZUVzdGltYXRlRGVmYXVsdHN9CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9uQ2hhbmdlPXsoZSkgPT4gc2V0UG9zRHJhZnQoKHApID0+ICh7IC4uLnAsIHVzZUVzdGltYXRlRGVmYXVsdHM6IGUudGFyZ2V0LmNoZWNrZWQgfSkpfQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLz4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFVzZSBlc3RpbWF0ZSBkZWZhdWx0cyBmb3IgdGhpcyBwb3NpdGlvbgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvbGFiZWw+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPFNtYWxsPldoZW4gdW50aWNrZWQsIHlvdSBjYW4gb3ZlcnJpZGUgdGhlIHNhbWUgZGVmYXVsdHMgYmVsb3cuPC9TbWFsbD4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj4KCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB7IXBvc0RyYWZ0LnVzZUVzdGltYXRlRGVmYXVsdHMgJiYgKAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8RGVmYXVsdHNFZGl0b3IKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aXRsZT0iUG9zaXRpb24gT3ZlcnJpZGVzIgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHByb2R1Y3RUeXBlPXsocG9zRHJhZnQub3ZlcnJpZGVzLnByb2R1Y3RUeXBlIGFzIFByb2R1Y3RUeXBlKSB8fCBzZWxlY3RlZEVzdGltYXRlLmRlZmF1bHRzLnByb2R1Y3RUeXBlfQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhbHVlPXt7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAuLi5zZWxlY3RlZEVzdGltYXRlLmRlZmF1bHRzLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLi4ucG9zRHJhZnQub3ZlcnJpZGVzLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH19CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb25DaGFuZ2U9eyhuZXh0KSA9PiBzZXRQb3NpdGlvbkRlZmF1bHRzT3ZlcnJpZGUobmV4dCl9CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2hvd0Rvb3JPcHRpb25zPXtwb3NEcmFmdC5wb3NpdGlvblR5cGUgPT09ICJEb29yIn0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLz4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICl9CiAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+CgogICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgc3R5bGU9e3sgYm9yZGVyUmFkaXVzOiAxNCwgYm9yZGVyOiAiMXB4IHNvbGlkICNlNGU0ZTciLCBwYWRkaW5nOiAxMiB9fT4KICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgc3R5bGU9e3sgZGlzcGxheTogImZsZXgiLCBhbGlnbkl0ZW1zOiAiY2VudGVyIiwganVzdGlmeUNvbnRlbnQ6ICJzcGFjZS1iZXR3ZWVuIiwgZ2FwOiAxMCB9fT4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPEgzPlByZXZpZXc8L0gzPgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8UGlsbD57cG9zRHJhZnQuaW5zZXJ0aW9ufTwvUGlsbD4KICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PgoKICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgc3R5bGU9e3sgbWFyZ2luVG9wOiAxMiB9fT4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPEdyaWRFZGl0b3IKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwb3M9e3sKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHdpZHRoTW06IHBvc0RyYWZ0LndpZHRoTW0sCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBoZWlnaHRNbTogcG9zRHJhZnQuaGVpZ2h0TW0sCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBmaWVsZHNYOiBwb3NEcmFmdC5maWVsZHNYLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZmllbGRzWTogcG9zRHJhZnQuZmllbGRzWSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGluc2VydGlvbjogcG9zRHJhZnQuaW5zZXJ0aW9uLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2VsbEluc2VydGlvbnM6IHBvc0RyYWZ0LmNlbGxJbnNlcnRpb25zLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29sV2lkdGhzTW06IHBvc0RyYWZ0LmNvbFdpZHRoc01tLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcm93SGVpZ2h0c01tOiBwb3NEcmFmdC5yb3dIZWlnaHRzTW0sCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfX0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZWxlY3RlZENlbGw9e2RyYWZ0U2VsZWN0ZWRDZWxsfQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9uU2VsZWN0Q2VsbD17c2V0RHJhZnRTZWxlY3RlZENlbGx9CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmlldz17cHJldmlld1ZpZXd9CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb3BlbmluZ1N0ZD17b3BlbmluZ1N0ZH0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRQb3M9eyhmbjogYW55KSA9PgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0UG9zRHJhZnQoKHApID0+IHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgbmV4dCA9IGZuKHApOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBlbnN1cmUgbmV3IGZpZWxkcyBnZXQgYSBkZWZhdWx0IGluc2VydGlvbgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBjZWxsSW5zZXJ0aW9ucyA9IG5vcm1hbGl6ZUNlbGxJbnNlcnRpb25zKAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5leHQuZmllbGRzWCA/PyBwLmZpZWxkc1gsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbmV4dC5maWVsZHNZID8/IHAuZmllbGRzWSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBuZXh0LmNlbGxJbnNlcnRpb25zID8/IHAuY2VsbEluc2VydGlvbnMsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKG5leHQuaW5zZXJ0aW9uID8/IHAuaW5zZXJ0aW9uKSBhcyBhbnkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHsgLi4ucCwgLi4ubmV4dCwgY2VsbEluc2VydGlvbnMgfTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvPgogICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+CgogICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBzdHlsZT17eyBtYXJnaW5Ub3A6IDEyLCBib3JkZXJUb3A6ICIxcHggc29saWQgI2U0ZTRlNyIsIHBhZGRpbmdUb3A6IDEwIH19PgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8SDM+U3VtbWFyeTwvSDM+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxTbWFsbD4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBFZmZlY3RpdmUgZGVmYXVsdHM6eyIgIn0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7KCgpID0+IHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGVmZiA9IGVmZmVjdGl2ZURlZmF1bHRzRm9yUG9zaXRpb24oc2VsZWN0ZWRFc3RpbWF0ZSwgcG9zRHJhZnQpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGAke2VmZi5zdXBwbGllciB8fCAi4oCUIn0gLyAke2VmZi5wcm9kdWN0VHlwZSB8fCAi4oCUIn0gLyAke2VmZi5wcm9kdWN0IHx8ICLigJQifSDigKIgSGluZ2U6ICR7ZWZmLmhpbmdlVHlwZX0g4oCiIEdsYXNzOiAke2VmZi5nbGFzc1R5cGV9IFVnICR7ZWZmLnVnVmFsdWV9IEcgJHtlZmYuZ1ZhbHVlfWA7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSkoKX0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9TbWFsbD4KICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PgogICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PgogICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj4KICAgICAgICAgICAgICAgICAgICAgICl9CiAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+CgogICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXY+CgogICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgc3R5bGU9e3sgYm9yZGVyUmFkaXVzOiAxNCwgYm9yZGVyOiAiMXB4IHNvbGlkICNlNGU0ZTciLCBwYWRkaW5nOiAxMiB9fT4KICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgc3R5bGU9e3sgZGlzcGxheTogImZsZXgiLCBhbGlnbkl0ZW1zOiAiY2VudGVyIiwganVzdGlmeUNvbnRlbnQ6ICJzcGFjZS1iZXR3ZWVuIiwgZ2FwOiAxMCB9fT4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPEgzPlByZXZpZXc8L0gzPgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8UGlsbD57cG9zRHJhZnQuaW5zZXJ0aW9ufTwvUGlsbD4KICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PgoKICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgc3R5bGU9e3sgbWFyZ2luVG9wOiAxMiB9fT4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPEdyaWRFZGl0b3IKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwb3M9e3sKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHdpZHRoTW06IHBvc0RyYWZ0LndpZHRoTW0sCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBoZWlnaHRNbTogcG9zRHJhZnQuaGVpZ2h0TW0sCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBmaWVsZHNYOiBwb3NEcmFmdC5maWVsZHNYLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZmllbGRzWTogcG9zRHJhZnQuZmllbGRzWSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGluc2VydGlvbjogcG9zRHJhZnQuaW5zZXJ0aW9uLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2VsbEluc2VydGlvbnM6IHBvc0RyYWZ0LmNlbGxJbnNlcnRpb25zLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29sV2lkdGhzTW06IHBvc0RyYWZ0LmNvbFdpZHRoc01tLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcm93SGVpZ2h0c01tOiBwb3NEcmFmdC5yb3dIZWlnaHRzTW0sCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfX0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZWxlY3RlZENlbGw9e2RyYWZ0U2VsZWN0ZWRDZWxsfQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9uU2VsZWN0Q2VsbD17c2V0RHJhZnRTZWxlY3RlZENlbGx9CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmlldz17cHJldmlld1ZpZXd9CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb3BlbmluZ1N0ZD17b3BlbmluZ1N0ZH0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRQb3M9eyhmbjogYW55KSA9PgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0UG9zRHJhZnQoKHApID0+IHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgbmV4dCA9IGZuKHApOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBlbnN1cmUgbmV3IGZpZWxkcyBnZXQgYSBkZWZhdWx0IGluc2VydGlvbgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBjZWxsSW5zZXJ0aW9ucyA9IG5vcm1hbGl6ZUNlbGxJbnNlcnRpb25zKAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5leHQuZmllbGRzWCA/PyBwLmZpZWxkc1gsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbmV4dC5maWVsZHNZID8/IHAuZmllbGRzWSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBuZXh0LmNlbGxJbnNlcnRpb25zID8/IHAuY2VsbEluc2VydGlvbnMsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKG5leHQuaW5zZXJ0aW9uID8/IHAuaW5zZXJ0aW9uKSBhcyBhbnkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHsgLi4ucCwgLi4ubmV4dCwgY2VsbEluc2VydGlvbnMgfTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvPgogICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+CgogICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBzdHlsZT17eyBtYXJnaW5Ub3A6IDEyLCBib3JkZXJUb3A6ICIxcHggc29saWQgI2U0ZTRlNyIsIHBhZGRpbmdUb3A6IDEwIH19PgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8SDM+U3VtbWFyeTwvSDM+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxTbWFsbD4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBFZmZlY3RpdmUgZGVmYXVsdHM6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgeyIgIn0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7KCgpID0+IHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGVmZiA9IGVmZmVjdGl2ZURlZmF1bHRzRm9yUG9zaXRpb24oc2VsZWN0ZWRFc3RpbWF0ZSwgcG9zRHJhZnQpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGAke2VmZi5zdXBwbGllciB8fCAi4oCUIn0gLyAke2VmZi5wcm9kdWN0VHlwZSB8fCAi4oCUIn0gLyAke2VmZi5wcm9kdWN0IHx8ICLigJQifSDigKIgSGluZ2U6ICR7ZWZmLmhpbmdlVHlwZX0g4oCiIEdsYXNzOiAke2VmZi5nbGFzc1R5cGV9IFVnICR7ZWZmLnVnVmFsdWV9IEcgJHtlZmYuZ1ZhbHVlfWA7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSkoKX0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9TbWFsbD4KICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PgogICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PgogICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj4KICAgICAgICAgICAgICAgICAgICAgICl9CiAgICAgICAgICAgICAgICAgICAgPC9kaXY+CgogICAgICAgICAgICAgICAgICAgIDxkaXYgc3R5bGU9e3sgbWFyZ2luVG9wOiAxMiwgZGlzcGxheTogImZsZXgiLCBhbGlnbkl0ZW1zOiAiY2VudGVyIiwganVzdGlmeUNvbnRlbnQ6ICJzcGFjZS1iZXR3ZWVuIiB9fT4KICAgICAgICAgICAgICAgICAgICAgIDxCdXR0b24gdmFyaWFudD0ic2Vjb25kYXJ5IiBvbkNsaWNrPXsoKSA9PiBzZXRQb3NTdGVwKChzKSA9PiAocyA9PT0gMSA/IDEgOiAoKHMgLSAxKSBhcyBhbnkpKSl9IGRpc2FibGVkPXtwb3NTdGVwID09PSAxfT4KICAgICAgICAgICAgICAgICAgICAgICAgQmFjawogICAgICAgICAgICAgICAgICAgICAgPC9CdXR0b24+CgogICAgICAgICAgICAgICAgICAgICAge3Bvc1N0ZXAgPCAzID8gKAogICAgICAgICAgICAgICAgICAgICAgICA8QnV0dG9uIHZhcmlhbnQ9InByaW1hcnkiIG9uQ2xpY2s9eygpID0+IHNldFBvc1N0ZXAoKHMpID0+ICgocyArIDEpIGFzIGFueSkpfT4KICAgICAgICAgICAgICAgICAgICAgICAgICBOZXh0CiAgICAgICAgICAgICAgICAgICAgICAgIDwvQnV0dG9uPgogICAgICAgICAgICAgICAgICAgICAgKSA6ICgKICAgICAgICAgICAgICAgICAgICAgICAgPEJ1dHRvbiB2YXJpYW50PSJwcmltYXJ5IiBvbkNsaWNrPXtzYXZlUG9zaXRpb25Ub0VzdGltYXRlfT4KICAgICAgICAgICAgICAgICAgICAgICAgICBTYXZlIFBvc2l0aW9uCiAgICAgICAgICAgICAgICAgICAgICAgIDwvQnV0dG9uPgogICAgICAgICAgICAgICAgICAgICAgKX0KICAgICAgICAgICAgICAgICAgICA8L2Rpdj4KICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj4KICAgICAgICAgICAgICAgICAgPC9kaXY+CiAgICAgICAgICAgICAgICApfQogICAgICAgICAgICAgIDwvQ2FyZD4KICAgICAgICAgICAgKX0KICAgICAgICAgIDwvZGl2PgogICAgICAgIDwvZGl2PgogICAgICA8L2Rpdj4KICAgIDwvZGl2PgogICk7Cn0KCgoKCgo=
"@

Write-Utf8NoBom-FromBase64 (Join-Path $WebRoot "src\App.tsx") $AppB64
Ok "Rewrote src\App.tsx (JSX structure repaired)."

Write-Host ""
Write-Host "Next:" -ForegroundColor Cyan
Write-Host "  1) Run: npm run dev" -ForegroundColor Cyan
